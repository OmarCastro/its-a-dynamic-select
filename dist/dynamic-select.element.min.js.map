{
  "version": 3,
  "sources": ["esm/web-component/dynamic-select.element.html.generated.js", "esm/web-component/dynamic-select.element.css.generated.js", "esm/utils/string-path.js", "esm/utils/templater.js", "esm/utils/object.js", "esm/utils/option-data.js", "esm/utils/memoization.js", "esm/features/templates/default-select-templates.inline.html.generated.js", "esm/features/templates/templates.js", "esm/features/configuration/configuration.js", "esm/utils/csv-parser.js", "esm/utils/response.js", "esm/features/parses-csv-data-response/parse-csv-response.js", "esm/features/parses-json-array-and-object-data-response/parse-json-response.js", "esm/utils/json-lines-parser.js", "esm/features/parses-json-lines-object-array-data-response/parse-json-lines-response.js", "esm/features/data-loading/fetch-data.js", "esm/utils/dynamic-select-dom.js", "esm/features/dynamic-loaded-options/dynamic-option.js", "esm/utils/iterable-weak-struct.js", "esm/utils/mobile-detection.js", "esm/features/centers-dropdown-to-screen-on-mobile/dropdown-mobile-centering.js", "esm/features/dropdown-reflects-select-position-and-visibility/dropdown-position-updater.js", "esm/utils/traverse-up-dom.js", "esm/utils/get-lang-from-element.util.js", "esm/features/dropdown-inputs-are-internationalized/dropdown-i18n.js", "esm/web-component/dynamic-select.element.js", "esm/entrypoint/browser.js"],
  "sourcesContent": ["// generated code from src/web-component/dynamic-select.element.html\nvar stdin_default = '<div class=\"container\"> <span class=\"input\"></span> <dialog class=\"dropdown\" popover=\"\"> <div class=\"filters\"> <input class=\"search-input\"> </div> <ul class=\"value-list\"></ul> <div class=\"buttons\"> <button class=\"ok\">OK</button> <button class=\"cancel\">Cancel</button> </div> </dialog> <div class=\"dynamic-options\"></div>\\n</div>\\n';\nexport {\n  stdin_default as default\n};\n", "// generated code from src/web-component/dynamic-select.element.css\nvar stdin_default = ':host{display:inline-block}@scope (.container) to (:is(.option-content,.loading-notification)){.multi-input{line-height:2em;display:inline-flex;flex-direction:row;align-items:center;position:relative;color:buttontext;padding:.125em .5em;width:100%;>.selected-options{z-index:1;position:relative;pointer-events:none;flex:1}}.background-button{position:absolute;inset:0}.container{display:inline-block;position:relative;width:100%}.dropdown{border:none;box-sizing:border-box;&.top-direction{transform:translateY(-100%)}&.left-direction{transform:translate(-100%)}&.top-direction.left-direction{transform:translate(-100%,-100%)}}.selected-value{width:100%;position:relative;color:buttontext;padding:.125em .5em;min-height:1lh;white-space:nowrap;display:flex;.option{z-index:1;position:relative;pointer-events:none;flex:1}}.collapse-arrow{--arrow-size: .2em;margin-left:.5em;margin-right:.5ch;height:0;padding:var(--arrow-size);border:solid currentColor;opacity:70%;border-width:0 var(--arrow-size) var(--arrow-size) 0;display:inline-block;transform:translateY(calc(var(--arrow-size) * -1)) rotate(45deg);transform-origin:calc(50% + var(--arrow-size)/2) calc(50% + var(--arrow-size)/2);pointer-events:none;align-self:center;:host([open]) &{transform:translateY(calc(var(--arrow-size) * -1)) rotate(225deg)}}.multiselect-option{line-height:1em;border:1px solid color-mix(in srgb,currentColor,transparent 50%);border-radius:.5em;margin:.2em .25em;padding:.2em .5em;white-space:nowrap;display:inline-flex;gap:.5ch;align-items:center}.value-list{list-style:none;padding:0}.option-group header{font-weight:700}.input{display:inline-flex;width:100%}.dynamic-options{display:none}.multi-input--input-field{background:none}.multiselect-option>.deselect-option,.clear-button{--b: .15em;--s: .2em;--c: currentColor;content:\" \";display:inline-block;height:1em;aspect-ratio:1;box-sizing:border-box;--g:conic-gradient(var(--c) 0 0) no-repeat 50%/;background:var(--g) var(--b) calc(100% - 2*var(--s)),var(--g) calc(100% - 2*var(--s)) var(--b);rotate:45deg;opacity:.5;appearance:none;border:none;color:inherit;pointer-events:all;&:hover{cursor:pointer;opacity:1}}.multi-input:not(:has(.multiselect-option:nth-child(2))) .clear-button{display:none}.option-checked-indicator{display:none;float:right}.search-input{width:100%;margin:auto;box-sizing:border-box}.buttons{display:none;text-align:right;& button{appearance:none;background:none;border:none;margin:1em;font-weight:700}}.option-group .option{padding-left:1em}}@scope (.container[data-ui-mode=\"mobile\"]) to (:is(.option-content,.loading-notification)){.dropdown{padding:0;margin:0;border-radius:.5em;font-size:large;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;width:90vw;max-height:90vh;overscroll-behavior:contain}.filters{position:relative;text-align:center}.search-input{width:90%;margin:auto}.option-value{padding:.1em 1em}.option-checked-indicator{display:inline-block}}.option-content:not(.option-content *){display:contents}:host([multiple]) .container[data-ui-mode=mobile] .buttons:not(.option-content *){display:flex;flex-direction:row-reverse}.option-value:not(.option-content *){&[aria-selected=true],&:hover{background-color:#0000001a}&[data-focused]{outline:dashed currentColor}.container[data-ui-mode=mobile] &{background-color:transparent;&:not(:last-child){border-bottom:solid 1px rgba(0,0,0,.2)}}}.container[load-mode=async][data-ui-mode=mobile] .dropdown{height:90vh}@media screen and (forced-colors:active){.option-value:not(.option-content *){&[aria-selected=true],&:hover{background-color:Mark;color:MarkText;>*{background-color:inherit;color:inherit}}}}.loading-notification:not(.loading-notification *){display:none;.container[data-loading] &{display:block}}.default-loader{--radius: 1em;--diameter: calc(var(--radius) * 2);display:flex;gap:1em;align-items:center;justify-content:center;padding:.5em}.default-loader>.dot:not(.option-content *){border-radius:50%;background-color:#8888;width:var(--diameter);height:var(--diameter);animation:default-loader-animation 1.8s infinite ease-in-out;animation-fill-mode:both;font-size:7px;position:relative;animation-delay:-.16s;display:inline-block;&:nth-of-type(2){animation-delay:.16s}&:nth-of-type(3){animation-delay:.32s}}@keyframes default-loader-animation{0%,80%,to{clip-path:circle(var(--radius))}40%{clip-path:circle(0)}}\\n';\nexport {\n  stdin_default as default\n};\n", "/** Used to match property names within property paths. */\nconst rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g\n\n/** Used to match backslashes in property paths. */\nconst reEscapeChar = /\\\\(\\\\)?/g\n\n/**\n * Used to memoize `stringToPath()` results.\n * @type {{[stringPath: string]: ReturnType<typeof stringToPath>}}\n */\nconst stringToPathCache = {}\n\n/**\n * Converts `string` to a property path array.\n *\n * @param {string} string The string to convert.\n * @returns {readonly string[]} Returns the property path array.\n */\nexport function stringToPath (string) {\n  const cachedResult = stringToPathCache[string]\n  if (cachedResult) { return cachedResult }\n\n  const result = []\n  if (string.at(0) === '.') {\n    result.push('')\n  }\n  string.replace(rePropName, function (match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match))\n    return ''\n  })\n\n  const finalResult = Object.freeze(result)\n  stringToPathCache[string] = finalResult\n  return finalResult\n}\n\n/**\n * Get object data from a string path\n *\n * @param {unknown} obj - target object\n * @param {string} stringPath - string path\n * @returns {unknown} result from string path\n */\nexport function getFromStringPath (obj, stringPath) {\n  if (obj == null) { return obj }\n  const pathArray = stringToPath(stringPath)\n  let current = obj\n  for (const section of pathArray) {\n    current = current[/** @type {never} */(section)]\n    if (current == null) { return current }\n  }\n  return current\n}\n", "import { getFromStringPath } from './string-path.js'\n\n/**\n * @param {unknown} value - value to normalize\n * @returns {string} normalized value\n */\nfunction normalizeValue (value) {\n  return value === undefined ? '' : typeof value === 'object' ? JSON.stringify(value) : String(value)\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @param {Element} currentElement The string to convert.\n * @param {Record<string, unknown>} currentData The string to convert.\n */\nfunction applyTemplateAux (currentElement, currentData) {\n  switch (currentElement.tagName) {\n    case 'SLOT': {\n      const name = currentElement.getAttribute('name') ?? ''\n      if (name.startsWith('$.')) {\n        currentElement.removeAttribute('name')\n        const content = normalizeValue(getFromStringPath(currentData, name.slice(2)))\n        const parent = currentElement.parentNode\n        currentElement.replaceWith(content)\n        parent?.normalize()\n      }\n      break\n    }\n    case 'TEMPLATE': {\n      const loopPath = currentElement.getAttribute('data-each') ?? ''\n      if (loopPath.startsWith('$.')) {\n        const data = getFromStringPath(currentData, loopPath.slice(2))\n        if (Array.isArray(data)) {\n          const newContent = data.map(newData => applyTemplate(/** @type {HTMLTemplateElement} */ (currentElement), newData))\n          currentElement.replaceWith(...newContent)\n          return\n        }\n      }\n    }\n  }\n  for (const { name, value } of currentElement.attributes) {\n    if (value.startsWith('$.')) {\n      const newValue = normalizeValue(getFromStringPath(currentData, value.slice(2)))\n      currentElement.setAttribute(name, newValue)\n    } else if (value.startsWith('$?.')) {\n      const newValue = !!getFromStringPath(currentData, value.slice(3))\n      if (newValue) {\n        currentElement.setAttribute(name, '')\n      } else {\n        currentElement.removeAttribute(name)\n      }\n    } else if (value.startsWith('$$')) {\n      currentElement.setAttribute(name, value.slice(1))\n    }\n  }\n\n  for (const child of currentElement.children) {\n    applyTemplateAux(child, currentData)\n  }\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @param {HTMLTemplateElement} template The string to convert.\n * @param {Record<string, unknown>} data The string to convert.\n * @returns {DocumentFragment} Returns the property path array.\n */\nexport function applyTemplate (template, data) {\n  const clone = /** @type {DocumentFragment} */(template.content.cloneNode(true))\n  for (const child of [...clone.children]) {\n    applyTemplateAux(child, data)\n  }\n\n  return clone\n}\n", "/**\n *\n * @param {unknown} obj - target object\n * @returns {obj is Record<string,any>} true if `obj` is a plain object, false otherwise\n */\nexport const isPlainObject = obj => !!obj && [null, Object.prototype].includes(Object.getPrototypeOf(obj))\n", "import { isPlainObject } from './object.js'\n\n/**\n * @typedef {object} OptionData\n *\n * JSON representation of option data\n *\n * @property {boolean} selected - option selected flag\n * @property {string} text - option text\n * @property {string} value - option value\n * @property {\"fetch\"|\"option\"} origin - gets where the data is from\n * @property { {\n *  [x:string]: unknown,\n *  text: string,\n *  value: string,\n *  group?: string\n * }} data - option custom data\n */\n\n/**\n * get data object of option in a JSON represented format\n *\n * @param {HTMLOptionElement} option - target element in shadow DOM\n * @returns {OptionData} option data\n */\nexport function dataObjectOfOption (option) {\n  const baseData = {\n    text: option.textContent || '',\n    value: option.value,\n  }\n  const dataAttr = option.getAttribute('data-of-option')\n  if (dataAttr != null && dataAttr.trim() !== '') {\n    try {\n      const jsonData = JSON.parse(dataAttr)\n      if (!isPlainObject(jsonData)) { throw Error('data-of-option attr must be serialized json object') }\n      return {\n        ...baseData,\n        selected: option.selected,\n        origin: 'option',\n        data: {\n          ...jsonData,\n          ...baseData,\n        }\n      }\n    } catch {\n      // ignore\n    }\n  }\n  return {\n    ...baseData,\n    selected: option.selected,\n    origin: 'option',\n    data: baseData,\n  }\n}\n\n/**\n * creates an option element based on option data\n *\n * @param {OptionData} optionData - option data\n * @returns {HTMLOptionElement} option element\n */\nexport function optionElementOfData (optionData) {\n  const option = document.createElement('option')\n  option.textContent = optionData.text\n  option.value = optionData.value\n  option.selected = optionData.selected\n  option.setAttribute('data-of-option', JSON.stringify(optionData.data))\n  return option\n}\n", "/**\n * Memoization technique that calls the callback once, subsequent calls\n * simply returns the result of the first callback\n *\n * No arguments are passed to the callback\n *\n * @template {() => unknown} T\n * @param {T} callback - callback to memoize\n * @returns {() => ReturnType<T>} memoized function\n */\nexport function computeOnce (callback) {\n  let call = () => {\n    const result = /** @type {ReturnType<T>} */(callback())\n    call = () => result\n    return result\n  }\n  return () => call()\n}\n", "// generated code from src/features/templates/default-select-templates.inline.html\nvar stdin_default = '<template id=\"option\"><span data-value=\"$.value\"><slot name=\"$.text\"></slot></span></template><template id=\"option-list\"><span data-value=\"$.value\"><slot name=\"$.text\"></slot></span></template><template id=\"single-select-input\"><span class=\"selected-value\"><button class=\"background-button\"></button><span class=\"option\"><span class=\"option-content\"><slot data-value=\"$.selectedOption\" name=\"selected-option\"></slot></span></span><span class=\"collapse-arrow\" role=\"presentation\"></span></span></template><template id=\"multi-select-input\"><span class=\"multi-input\"><button class=\"background-button\"></button><span class=\"selected-options\"><template data-each=\"$.selectedOptions\"><span data-value=\"$.value\" class=\"option multiselect-option\"><span class=\"option-content\"><slot data-value=\"$.\" name=\"selected-option\"></slot></span><button class=\"deselect-option\" tabindex=\"-1\"></button></span></template></span><a class=\"clear-button\"></a><i class=\"collapse-arrow\" role=\"presentation\"></i></span></template><template id=\"multi-select-input--mobile\"><span class=\"multi-input\"><button class=\"background-button\"></button><span class=\"selected-options\"><template data-each=\"$.selectedOptions\"><span data-value=\"$.value\" class=\"option multiselect-option\"><span class=\"option-content\"><slot data-value=\"$.\" name=\"selected-option\"></slot></span></span></template></span><i class=\"collapse-arrow\" role=\"presentation\"></i></span></template><template id=\"dropdown-list\"><template data-each=\"$.ungroupedOptions\"><li class=\"option-value\" data-value=\"$.value\" aria-selected=\"$.selected\" data-focused=\"$?.focused\"><label><span class=\"option\"><span class=\"option-content\"><slot data-value=\"$.\" name=\"option\"></slot></span></span><input value=\"$.value\" class=\"option-checked-indicator\" type=\"$.checkedIndicatorType\" checked=\"$?.selected\"></label></li></template><template data-each=\"$.optionGroups\"><li class=\"option-group\"><header><slot name=\"$.groupName\"></slot></header><ul class=\"value-list\"><template data-each=\"$.options\"><li class=\"option-value\" data-value=\"$.value\" aria-selected=\"$.selected\" data-focused=\"$?.focused\"><label><span class=\"option\"><slot data-value=\"$.\" name=\"option\"></slot></span><input value=\"$.value\" class=\"option-checked-indicator\" type=\"$.checkedIndicatorType\" checked=\"$?.selected\"></label></li></template></ul></li></template><span class=\"loading-notification\"><slot name=\"loading-notification\"></slot></span></template><template id=\"loading-notification\"><div class=\"default-loader\"><div class=\"dot\"></div><div class=\"dot\"></div><div class=\"dot\"></div></div></template>';\nexport {\n  stdin_default as default\n};\n", "import { computeOnce } from '../../utils/memoization.js'\nimport defaultTemplatesHtml from './default-select-templates.inline.html.generated.js'\n\n/**\n * @typedef {object} MutableTemplates\n * @property {HTMLTemplateElement} option - option template in the dropdown and button\n * @property {HTMLTemplateElement} singleSelectInput - single select button template\n * @property {HTMLTemplateElement} multiSelectInput - multi select button template\n * @property {HTMLTemplateElement} mobileMultiSelectInput - mobile ui for multi select button template\n * @property {HTMLTemplateElement} dropdownList - dropdown option list template\n * @property {HTMLTemplateElement} loadingNotification - loading notification template\n */\n\n/**\n * @typedef {Readonly<MutableTemplates>} Templates\n */\n\n/**\n * @returns {Templates} default templates to use as fallback\n */\nconst loadSelectDefaultTemplates = computeOnce(() => {\n  const templatesRootElement = document.createElement('template')\n  templatesRootElement.innerHTML = defaultTemplatesHtml\n  /**\n   * @param {string} name - template id on './dynamic-select.templates.html'\n   */\n  const query = (name) => {\n    const result = templatesRootElement.content.querySelector('template#' + name)\n    if (!(result instanceof HTMLTemplateElement)) throw Error(`Error: default template \"${JSON.stringify(name)}\" not defined`)\n    return result\n  }\n\n  const templates = Object.freeze({\n    option: query('option'),\n    singleSelectInput: query('single-select-input'),\n    multiSelectInput: query('multi-select-input'),\n    mobileMultiSelectInput: query('multi-select-input--mobile'),\n    dropdownList: query('dropdown-list'),\n    loadingNotification: query('loading-notification'),\n  })\n  return templates\n})\n\n/**\n * @param {HTMLElement} element - target element\n * @returns {Templates} templates object of `element`\n */\nexport function templatesOf (element) {\n  return {\n    get option () {\n      const scopedTemplate = element.querySelector(':scope > template[data-for=\"option\"]')\n      if (scopedTemplate) return scopedTemplate\n      return loadSelectDefaultTemplates().option\n    },\n    get singleSelectInput () {\n      return loadSelectDefaultTemplates().singleSelectInput\n    },\n    get multiSelectInput () {\n      return loadSelectDefaultTemplates().multiSelectInput\n    },\n    get mobileMultiSelectInput () {\n      return loadSelectDefaultTemplates().mobileMultiSelectInput\n    },\n    get dropdownList () {\n      return loadSelectDefaultTemplates().dropdownList\n    },\n    get loadingNotification () {\n      const scopedTemplate = element.querySelector(':scope > template[data-for=\"loading-notification\"]')\n      if (scopedTemplate) return scopedTemplate\n      return loadSelectDefaultTemplates().loadingNotification\n    },\n  }\n}\n", "/**\n * @typedef {object} Configuration\n *\n * Configurations of Dynamic Select boxes\n *\n * @property {number} minQueryLength - minimum number of characters in the filter\n *  text input on dropdown to filter data in the option list, defaults to 3\n * @property {number} debounceQueryDuration - number of milliseconds for the\n *   text input to wait for updates before filtering the data\n */\n\nexport const defaultValues = Object.freeze({\n  minQueryLength: 3,\n  debounceQueryDuration: 250,\n})\n\n/**\n * @param {HTMLElement} element - target element\n * @returns {Readonly<Configuration>} configurations object\n */\nexport function configurationOf (element) {\n  return Object.freeze({\n    get minQueryLength () {\n      return getConfigPositiveIntegerOrZero(element, { attribute: 'data-min-query-length', config: 'minQueryLength' })\n    },\n    get debounceQueryDuration () {\n      return getConfigPositiveIntegerOrZero(element, { attribute: 'data-debounce-query-duration', config: 'debounceQueryDuration' })\n    },\n  })\n}\n\n/**\n *\n * @param {HTMLElement} element - target Element\n * @param {object} params - object parameters\n * @param {string} params.attribute - attribute name to query for\n * @param {keyof typeof defaultValues} params.config - config property name to search for\n * @returns {number} validConfigName\n */\nfunction getConfigPositiveIntegerOrZero (element, { attribute, config }) {\n  return validPositiveIntegerPlusZeroOrNull(element.getAttribute(attribute)) ??\n    validPositiveIntegerPlusZeroOrNull(element.constructor?.['config']?.[config]) ??\n    defaultValues[config]\n}\n\n/**\n *\n * @param {unknown} numericValue - target value\n * @returns {number | null} `numericValue` if integer, otherwise null\n */\nfunction validPositiveIntegerPlusZeroOrNull (numericValue) {\n  if (typeof numericValue === 'string') {\n    numericValue = Number.parseFloat(numericValue)\n  }\n  return typeof numericValue === 'number' && Number.isInteger(numericValue) && numericValue >= 0 ? numericValue : null\n}\n", "/**\n * Parses CSV from a string or iterables of strings.\n * @overload\n * @param {string | Iterable<string>} input - CSV source.\n * @param {string} [delimiter] - CSV delimiter.\n * @returns {Generator<{[field: string]: string}>} generator that yields a parsed CSV row\n * @example\n * for (const row of parseCSV(\"name,age\\nJohn,30\\nJane,25\")) {\n *   console.log(row);\n * }\n *\n * @example\n * const chunkArray = ['name,age\\n', 'John,30'];\n * for (const row of parseCSV(chunkArray)) {\n *   console.log(row);\n * }\n */\n/**\n * Parses CSV from async string iterables.\n *\n * @example\n * async function* chunks() {\n *   yield 'name,age\\nJo';\n *   yield 'hn,30\\n';\n * }\n * for await (const row of parseCSV(chunks())) {\n *   console.log(row);\n * }\n * @overload\n * @param {AsyncIterable<string>} input - CSV source.\n * @param {string} [delimiter] - CSV delimiter.\n * @returns {AsyncGenerator<{[field: string]: string}>} generator that yields a parsed CSV row\n */\nexport function parseCSV (input, delimiter = ',') {\n  if (typeof input === 'string') {\n    return parseCSVSync([input], delimiter)\n  } else if (isAsyncIterable(input)) {\n    return parseCSVAsync(input, delimiter)\n  } else if (isIterable(input)) {\n    return parseCSVSync(input, delimiter)\n  } else {\n    throw new TypeError('Input must be a string, Iterable, or AsyncIterable')\n  }\n}\n\n/**\n * @param {unknown} object - target object\n * @returns {object is Iterable} - true if iterable, false otherwise\n */\nconst isIterable = object => typeof object?.[Symbol.iterator] === 'function'\n\n/**\n * @param {unknown} object - target object\n * @returns {object is AsyncIterable} - true if iterable, false otherwise\n */\nconst isAsyncIterable = object => typeof object?.[Symbol.asyncIterator] === 'function'\n\n/**\n * Parses CSV from a synchronous iterable of strings.\n *\n * @param {Iterable<string>} iterable - Iterable of string chunks.\n * @param {string} [delimiter] - CSV delimiter.\n * @yields {{[field: string]: string}} parsed CSV row\n */\nfunction * parseCSVSync (iterable, delimiter = ',') {\n  let buffer = ''\n  let headers = null\n\n  for (const chunk of iterable) {\n    buffer += chunk.toString()\n\n    const lines = buffer.split(/\\r?\\n/)\n    buffer = lines.pop() ?? ''// keep last partial line\n\n    for (const line of lines) {\n      if (!line.trim()) continue\n\n      const fields = parseCSVLine(line, delimiter)\n\n      if (!headers) {\n        headers = fields\n      } else {\n        yield Object.fromEntries(headers.map((h, i) => [h, fields[i] ?? '']))\n      }\n    }\n  }\n\n  if (buffer.trim() && headers) {\n    const fields = parseCSVLine(buffer, delimiter)\n    yield Object.fromEntries(headers.map((h, i) => [h, fields[i] ?? '']))\n  }\n}\n\n/**\n * Parses CSV from an async iterable of string chunks.\n *\n * @param {AsyncIterable<string>} asyncIterable - Async iterable of chunks.\n * @param {string} [delimiter] - CSV delimiter.\n * @yields {{[field: string]: string}} parsed CSV row\n */\nasync function * parseCSVAsync (asyncIterable, delimiter = ',') {\n  let buffer = ''\n  let headers = null\n\n  for await (const chunk of asyncIterable) {\n    buffer += chunk.toString()\n\n    const lines = buffer.split(/\\r?\\n/)\n    buffer = lines.pop() ?? ''// keep last partial line\n\n    for (const line of lines) {\n      if (!line.trim()) continue\n\n      const fields = parseCSVLine(line, delimiter)\n\n      if (!headers) {\n        headers = fields\n      } else {\n        yield Object.fromEntries(headers.map((h, i) => [h, fields[i] ?? '']))\n      }\n    }\n  }\n\n  if (buffer.trim() && headers) {\n    const fields = parseCSVLine(buffer, delimiter)\n    yield Object.fromEntries(headers.map((h, i) => [h, fields[i] ?? '']))\n  }\n}\n\n/**\n * Parses a single CSV line into an array of fields.\n * Handles quoted fields and escaped quotes.\n *\n * @param {string} line - A single line of CSV text.\n * @param {string} [delimiter] - The delimiter character (default is comma).\n * @returns {string[]} - Array of parsed fields.\n */\nfunction parseCSVLine (line, delimiter = ',') {\n  const result = []\n  let current = ''\n  let inQuotes = false\n\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i]\n    const nextChar = line[i + 1]\n\n    if (char === '\"' && inQuotes && nextChar === '\"') {\n      current += '\"'\n      i++ // skip next quote\n    } else if (char === '\"') {\n      inQuotes = !inQuotes\n    } else if (char === delimiter && !inQuotes) {\n      result.push(current)\n      current = ''\n    } else {\n      current += char\n    }\n  }\n\n  result.push(current)\n  return result\n}\n", "/**\n * Generator function to stream text from response.\n *\n * @param {Response} response - response from fetch\n * @yields {string} text from the response stream.\n */\nexport async function * toTextStream (response) {\n  const { body } = response\n  if (!body) {\n    return\n  }\n  const reader = body.getReader()\n  const decoder = new TextDecoder()\n  while (true) {\n    // wait for next encoded chunk\n    const { done, value } = await reader.read()\n    // check if stream is done\n    if (done) break\n    // Decodes data chunk and yields it\n    yield (decoder.decode(value))\n  }\n}\n\n/**\n * Gets parsed LinkHeader. Returns empty LinkHeader if invalid or absent\n * @param {Response|string} responseOrHeader - response from fetch\n * @returns {LinkHeader} parser Link header\n */\nexport function linkHeaderOf (responseOrHeader) {\n  if (responseOrHeader instanceof Response) {\n    const header = responseOrHeader.headers.get('Link')\n    return parseLinkHttpHeader(header)\n  }\n  if (typeof responseOrHeader === 'string') {\n    return parseLinkHttpHeader(responseOrHeader)\n  }\n  return parseLinkHttpHeader(null)\n}\n\n/**\n * Parses \"X-Has-More\" as well as \"Has-More\" header from response to\n * detect if there is more data to fetch\n * Note: \"Has-More\" has higher priority than \"X-Has-More\"\n * @param {Response} response - response from fetch\n * @returns {boolean} parsed \"Has more\" response header\n */\nexport function parseHasMoreHeader (response) {\n  if (!(response instanceof Response)) {\n    return false\n  }\n  for (const headerName of ['Has-More', 'X-Has-More']) {\n    const header = response.headers.get(headerName)\n    if (header) {\n      return header.toLowerCase() === 'true'\n    }\n  }\n  return false\n}\n\n/**\n * Parses Link HTTP header used for pagination only\n * @param {string?} header - response from fetch\n * @returns {LinkHeader} parser Link header\n */\nfunction parseLinkHttpHeader (header) {\n  if (!header || header.length <= 0) {\n    return { entries: [], byRel: {} }\n  }\n\n  const entries = Iterator.from(splitLinkEntries(header))\n    .map(parseLinkHeaderEntry)\n    .filter(result => result != null)\n    .toArray()\n\n  const byRel = ({})\n  for (const entry of entries) {\n    const { params: { rel } } = entry\n    if (!rel) { continue }\n    for (const relEntry of rel.split(' ').filter(Boolean)) {\n      byRel[relEntry] ??= []\n      byRel[relEntry].push(entry)\n    }\n  }\n\n  return { entries, byRel }\n}\n\n/**\n * @param {string} header - header object\n */\nfunction splitLinkEntries (header) {\n  const entries = []\n  let subEntry = []\n\n  let current = ''\n  let inQuotes = false\n  let inAngleBrackets = false\n  let firstAngleBrackets = true\n\n  for (let i = 0, e = header.length; i < e; i++) {\n    const char = header[i]\n    if ((inAngleBrackets && char !== '>') || (inQuotes && char !== '\"')) {\n      current += char\n      continue\n    }\n    if (char === '<' && firstAngleBrackets) {\n      inAngleBrackets = true\n      firstAngleBrackets = false\n    }\n\n    if (char === '>') {\n      inAngleBrackets = false\n    }\n\n    if (char === '\"') {\n      inQuotes = !inQuotes\n    }\n\n    if (char === ';') {\n      subEntry.push(current)\n      current = ''\n      continue\n    }\n\n    if (char === ',') {\n      subEntry.push(current)\n      entries.push(subEntry)\n      current = ''\n      subEntry = []\n      firstAngleBrackets = true\n    } else {\n      current += char\n    }\n  }\n\n  if (current) {\n    subEntry.push(current)\n    entries.push(subEntry)\n  }\n  return entries\n}\n\n/**\n * @param {string[]} headerEntry - `Link` header entry\n * @returns {LinkHeaderEntry|null} parser header entry, or null if invalid\n */\nfunction parseLinkHeaderEntry (headerEntry) {\n  const [uri, ...params] = headerEntry\n  const match = uri.match(/<([^>]+)>/)\n  if (!match) return null\n\n  const url = match[1]\n\n  const parsedParams = Object.fromEntries(\n    Iterator.from(params)\n      .map(p => p.trim())\n      .filter(Boolean)\n      .map(param => param.match(/^([^=]+)=\"?([^\"]+)\"?$/))\n      .filter(match => match != null)\n      .map(match => {\n        const [,key, value] = match\n        return [key, value]\n      })\n      .toArray()\n  )\n  return { url, params: parsedParams }\n}\n\n/**\n * @typedef {object} LinkHeader\n *\n * @property {LinkHeaderEntry[]} entries - link entries\n * @property {{[rel: string]: LinkHeaderEntry[]}} byRel - link entries grouped by rel\n */\n\n/**\n * @typedef {object} LinkHeaderEntry\n *\n * @property {string} url - link entry URI\n * @property {{[key: string]: string}} params - link entry parameters\n */\n", "import { parseCSV } from '../../utils/csv-parser.js'\nimport { linkHeaderOf, toTextStream, parseHasMoreHeader } from '../../utils/response.js'\n/** @import {ParsedResponse} from '../data-loading/fetch-data' */\n/**\n * Checks if response is a valid CSV response\n * It checks by checking content type is CSV\n *\n * @param {Response} response - response from fetch\n * @returns {Promise<ParsedResponse>} parsed response\n */\nexport async function parseCSVResponse (response) {\n  if (!isCSVResponse(response)) {\n    throw Error('Not an CSV response')\n  }\n\n  const linkHeader = linkHeaderOf(response)\n  const hasNextHeader = parseHasMoreHeader(response)\n  const data = await Array.fromAsync(parseCSV(toTextStream(response)))\n  if (linkHeader.byRel.next) {\n    return {\n      hasMore: true,\n      navigationMode: 'link',\n      href: linkHeader.byRel.next[0].url,\n      data\n    }\n  }\n  if (hasNextHeader) {\n    return {\n      hasMore: true,\n      navigationMode: 'after_value',\n      data\n    }\n  }\n\n  return {\n    hasMore: false,\n    data\n  }\n}\n\n/**\n * Checks if response is a valid CSV response\n * It checks by checking content type is CSV and the response is a 200 status ok\n *\n * @param {Response} response - response from fetch\n * @returns {boolean} true if is a valid CSV response, false otherwise\n */\nexport function isCSVResponse (response) {\n  return response instanceof Response && response.ok && response.headers.get('Content-Type') === 'text/csv'\n}\n", "import { linkHeaderOf, parseHasMoreHeader } from '../../utils/response.js'\n/** @import {ParsedResponse} from '../data-loading/fetch-data' */\n\n/**\n * Checks if response is a valid CSV response\n * It checks by checking content type is CSV\n *\n * @param {Response} response - response from fetch\n * @returns {Promise<ParsedResponse>} parsed response\n */\nexport async function parseJsonResponse (response) {\n  if (!isJsonResponse(response)) {\n    throw Error('Not an JSON response')\n  }\n  const json = await response.json()\n  return Array.isArray(json) ? parseJsonArrayResponse(json, response) : parseJsonObjectResponse(json, response)\n}\n\n/**\n *\n * @param {any[]} json - json array parsed from `response` body\n * @param {Response} response - response from fetch\n * @returns {ParsedResponse} parsed response\n */\nfunction parseJsonArrayResponse (json, response) {\n  const linkHeader = linkHeaderOf(response)\n  const hasMoreHeader = parseHasMoreHeader(response)\n  const data = json\n  if (linkHeader.byRel.next) {\n    return {\n      hasMore: true,\n      navigationMode: 'link',\n      href: linkHeader.byRel.next[0].url,\n      data\n    }\n  }\n  if (hasMoreHeader) {\n    return {\n      hasMore: true,\n      navigationMode: 'after_value',\n      data\n    }\n  }\n\n  return {\n    hasMore: false,\n    data\n  }\n}\n\n/**\n *\n * @param {object} json - json object parsed from `response` body\n * @param {Response} response - response from fetch\n * @returns {ParsedResponse} parsed response\n */\nfunction parseJsonObjectResponse (json, response) {\n  const { links, hasMore, records } = json\n  const data = records\n  const nextLink = typeof links?.next === 'string' ? links.next : linkHeaderOf(response).byRel.next?.[0]?.url\n  const useHasMore = hasMore ?? parseHasMoreHeader(response)\n\n  if (nextLink) {\n    return {\n      hasMore: true,\n      navigationMode: 'link',\n      href: nextLink,\n      data\n    }\n  }\n  if (useHasMore) {\n    return {\n      hasMore: true,\n      navigationMode: 'after_value',\n      data\n    }\n  }\n\n  return {\n    hasMore: false,\n    data\n  }\n}\n\n/**\n * Checks if response is a valid CSV response\n * It checks by checking content type is CSV and the response is a 200 status ok\n *\n * @param {Response} response - response from fetch\n * @returns {boolean} true if is a valid CSV response, false otherwise\n */\nexport function isJsonResponse (response) {\n  return response.ok && response.headers.get('Content-Type') === 'application/json'\n}\n", "/**\n * Parses CSV from a string or iterables of strings.\n * @overload\n * @param {string | Iterable<string>} input - CSV source.\n * @param {string} [delimiter] - CSV delimiter.\n * @returns {Generator<*>} generator that yields a parsed CSV row\n * @example\n * for (const row of parseCSV(\"name,age\\nJohn,30\\nJane,25\")) {\n *   console.log(row);\n * }\n *\n * @example\n * const chunkArray = ['name,age\\n', 'John,30'];\n * for (const row of parseCSV(chunkArray)) {\n *   console.log(row);\n * }\n */\n/**\n * Parses CSV from async string iterables.\n *\n * @example\n * async function* chunks() {\n *   yield 'name,age\\nJo';\n *   yield 'hn,30\\n';\n * }\n * for await (const row of parseCSV(chunks())) {\n *   console.log(row);\n * }\n * @overload\n * @param {AsyncIterable<string>} input - CSV source.\n * @returns {AsyncGenerator<*>} generator that yields a parsed CSV row\n */\nexport function parseJsonLines (input) {\n  if (typeof input === 'string') {\n    return parseJsonLinesSync([input])\n  } else if (isAsyncIterable(input)) {\n    return parseJsonLinesAsync(input)\n  } else if (isIterable(input)) {\n    return parseJsonLinesSync(input)\n  } else {\n    throw new TypeError('Input must be a string, Iterable, or AsyncIterable')\n  }\n}\n\n/**\n * @param {unknown} object - target object\n * @returns {object is Iterable} - true if iterable, false otherwise\n */\nconst isIterable = object => typeof object?.[Symbol.iterator] === 'function'\n\n/**\n * @param {unknown} object - target object\n * @returns {object is AsyncIterable} - true if iterable, false otherwise\n */\nconst isAsyncIterable = object => typeof object?.[Symbol.asyncIterator] === 'function'\n\n/**\n * Parses CSV from a synchronous iterable of strings.\n *\n * @param {Iterable<string>} iterable - Iterable of string chunks.\n * @param {string} [delimiter] - CSV delimiter.\n * @yields {object | null | any[] | number | string} parsed CSV row\n */\nfunction * parseJsonLinesSync (iterable, delimiter = ',') {\n  let buffer = ''\n\n  for (const chunk of iterable) {\n    buffer += chunk.toString()\n\n    const lines = buffer.split(/\\r?\\n/)\n    buffer = lines.pop() ?? ''// keep last partial line\n\n    for (const line of lines) {\n      if (!line.trim()) continue\n      yield JSON.parse(line)\n    }\n  }\n\n  if (buffer.trim()) {\n    yield JSON.parse(buffer)\n  }\n}\n\n/**\n * Parses JSON lines from an async iterable of string chunks.\n *\n * @param {AsyncIterable<string>} asyncIterable - Async iterable of chunks.\n * @yields {object | null | any[] | number | string} parsed JSON line\n */\nasync function * parseJsonLinesAsync (asyncIterable) {\n  let buffer = ''\n\n  for await (const chunk of asyncIterable) {\n    buffer += chunk.toString()\n\n    const lines = buffer.split(/\\r?\\n/)\n    buffer = lines.pop() ?? ''// keep last partial line\n\n    for (const line of lines) {\n      if (!line.trim()) continue\n      yield JSON.parse(line)\n    }\n  }\n\n  if (buffer.trim()) {\n    yield JSON.parse(buffer)\n  }\n}\n", "import { parseJsonLines } from '../../utils/json-lines-parser.js'\nimport { isPlainObject } from '../../utils/object.js'\nimport { linkHeaderOf, toTextStream, parseHasMoreHeader } from '../../utils/response.js'\n/** @import {ParsedResponse} from '../data-loading/fetch-data' */\n/**\n * Checks if response is a valid CSV response\n * It checks by checking content type is CSV\n *\n * @param {Response} response - response from fetch\n * @returns {Promise<ParsedResponse>} parsed response\n */\nexport async function parseJsonLinesResponse (response) {\n  if (!isJsonLinesResponse(response)) {\n    throw Error('Not an CSV response')\n  }\n\n  const linkHeader = linkHeaderOf(response)\n  const hasNextHeader = parseHasMoreHeader(response)\n  const data = (await Array.fromAsync(parseJsonLines(toTextStream(response)))).filter(isPlainObject)\n\n  if (linkHeader.byRel.next) {\n    return {\n      hasMore: true,\n      navigationMode: 'link',\n      href: linkHeader.byRel.next[0].url,\n      data\n    }\n  }\n  if (hasNextHeader) {\n    return {\n      hasMore: true,\n      navigationMode: 'after_value',\n      data\n    }\n  }\n\n  return {\n    hasMore: false,\n    data\n  }\n}\n\n/**\n * Checks if response is a valid JSON Lines response\n * It checks by checking content type is JSON Lines and the response is a 200 status ok\n *\n * @param {Response} response - response from fetch\n * @returns {boolean} true if is a valid JSON Lines response, false otherwise\n */\nexport function isJsonLinesResponse (response) {\n  return response.ok && response.headers.get('Content-Type') === 'application/jsonl'\n}\n", "import { isPlainObject } from '../../utils/object.js'\nimport { parseCSVResponse, isCSVResponse } from '../parses-csv-data-response/parse-csv-response.js'\nimport { parseJsonResponse, isJsonResponse } from '../parses-json-array-and-object-data-response/parse-json-response.js'\nimport { isJsonLinesResponse, parseJsonLinesResponse } from '../parses-json-lines-object-array-data-response/parse-json-lines-response.js'\n\n/** @type {WeakMap<HTMLElement, DataLoader>} */\nconst dataLoaderData = new WeakMap()\n\n/**\n * @param {HTMLElement} element - target element\n * @returns {DataLoader} dataloader of element\n */\nexport function dataLoaderOf (element) {\n  let dataLoader = dataLoaderData.get(element)\n  if (!dataLoader) {\n    dataLoader = createDataLoaderFor(new WeakRef(element))\n    dataLoaderData.set(element, dataLoader)\n  }\n  return dataLoader\n}\n\n/**\n * Creates a dataloader for an element\n * @param {WeakRef<HTMLElement>} elementRef - weak reference of element. We do not want to have any strong reference chain pointing to\n * globally allocated `dataLoaderData`, effectively creating a memory leak\n * @returns {DataLoader} - created dataloader for element\n */\nfunction createDataLoaderFor (elementRef) {\n  const getElement = () => {\n    const element = elementRef.deref()\n    if (!element) { throw new Error('element no longer exists') }\n    return element\n  }\n  /** @type {DataLoader} */\n  const api = {\n    fetchData: async () => await fetchData(getElement()),\n    fetchNextData: async () => await fetchNextData(getElement()),\n    fetchHistory: [],\n    getLatestSuccessResponse () {\n      for (let i = api.fetchHistory.length - 1; i >= 0; i--) {\n        const record = api.fetchHistory[i]\n        if (record.completed) {\n          const result = record.result\n          if (!('error' in result)) { return result }\n        }\n      }\n    }\n\n  }\n  return api\n}\n\n/**\n *\n * @param {HTMLElement} element - target element\n * @param {DataToFetch} dataToFetch - info for data fetch\n */\nfunction dispatchFetchDataEvent (element, dataToFetch) {\n  let customResponse = /** @type {unknown} */(null)\n  let respondWithCalls = 0\n  const event = new CustomEvent('datafetch', {\n    cancelable: true,\n    composed: true,\n    bubbles: true,\n    detail: {\n      dataToFetch,\n      respondWith (data) {\n        customResponse = data\n        respondWithCalls++\n      }\n    }\n  })\n\n  element.dispatchEvent(event)\n\n  return { event, customResponse, respondWithCalls }\n}\n\n/**\n *\n * @param {HTMLElement} element - target element to load data to\n */\nasync function fetchData (element) {\n  const dataToFetch = {\n    query: getQueryValue(element),\n    url: getUrlToFetch(element)\n  }\n\n  return fetchFromDataToFetch(element, dataToFetch)\n}\n\n/**\n * @param {HTMLElement} element - target element to load data to\n */\nasync function fetchNextData (element) {\n  const loader = dataLoaderOf(element)\n  const currentData = loader.getLatestSuccessResponse()\n  if (currentData == null) {\n    return await fetchData(element)\n  }\n  if (!currentData.hasMore) {\n    // no need to fetch since we have all the data, return an empty result\n    return Object.freeze({ data: [], hasMore: false })\n  }\n\n  const dataToFetch = (() => {\n    if (currentData.navigationMode === 'link') {\n      return {\n        query: getQueryValue(element),\n        url: currentData.href\n      }\n    }\n    if (currentData.navigationMode === 'after_value') {\n      const latestValue = currentData.data.at(-1)?.value\n      const additionalQueryParams = latestValue ? Object.freeze({ after: String(latestValue) }) : {}\n      return {\n        query: getQueryValue(element),\n        url: getUrlToFetch(element, additionalQueryParams)\n      }\n    }\n  })()\n\n  if (!dataToFetch) {\n    console.error('error getting next data: unreachable code detected, aborting fetch')\n    return currentData\n  }\n\n  return fetchFromDataToFetch(element, dataToFetch)\n}\n\n/**\n *\n * @param {HTMLElement} element - target element\n * @param {DataToFetch} dataToFetch -\n */\nasync function fetchFromDataToFetch (element, dataToFetch) {\n  const fetchRecord = addToFetchHistory(element, {\n    dataToFetch,\n    loadingMode: 'sync',\n    status: 'dispatching event',\n    result: null,\n    completed: false\n  })\n\n  const { event, customResponse, respondWithCalls } = dispatchFetchDataEvent(element, dataToFetch)\n  if (respondWithCalls > 0) {\n    const isPromiseLike = typeof customResponse?.['then'] === 'function'\n    const isResponse = customResponse instanceof Response\n    fetchRecord.loadingMode = isPromiseLike || isResponse ? 'async' : 'sync'\n    fetchRecord.result = await parseRespondWithCall(customResponse)\n    fetchRecord.completed = true\n\n    if ('error' in fetchRecord.result) {\n      throw Error(fetchRecord.result.error)\n    }\n\n    return fetchRecord.result\n  }\n\n  const { url } = dataToFetch\n  if (!event.defaultPrevented && url) {\n    fetchRecord.loadingMode = 'async'\n    fetchRecord.status = 'fetching data'\n    const response = await fetch(url)\n    fetchRecord.status = 'parsing response'\n    fetchRecord.result = await parseResponse(response)\n    fetchRecord.status = Object.hasOwn(fetchRecord.result, 'error') ? 'error' : 'completed'\n    fetchRecord.completed = true\n\n    if ('error' in fetchRecord.result) {\n      throw Error(fetchRecord.result.error)\n    }\n    return fetchRecord.result\n  }\n\n  if (!url) {\n    fetchRecord.loadingMode = 'sync'\n    fetchRecord.completed = true\n    fetchRecord.result = {\n      data: [],\n      hasMore: false,\n    }\n    return fetchRecord.result\n  }\n\n  fetchRecord.loadingMode = 'sync'\n  fetchRecord.completed = true\n  fetchRecord.result = {\n    error: 'no data loaded',\n    stage: 'loading data'\n  }\n\n  throw Error('no data to load')\n}\n\n/**\n *\n * @param {*} paramOfRespondWith - param sent to event.detail.respondWith()\n * @returns {Promise<ParsedResponse | ParseError>} parse result\n */\nasync function parseRespondWithCall (paramOfRespondWith) {\n  const result = await Promise.resolve(paramOfRespondWith)\n  if (result instanceof Response) {\n    const parsedResponse = await parseResponse(result)\n    if ('error' in parsedResponse) {\n      parsedResponse.error = `parse event .respondWith(Response): ${parsedResponse.error}`\n    }\n    return parsedResponse\n  }\n\n  if (Array.isArray(result)) {\n    return {\n      data: result,\n      hasMore: false\n    }\n  }\n  if (isPlainObject(result)) {\n    const { hasMore, links, records } = result\n    if (!Array.isArray(records)) {\n      return {\n        error: `records property must be an array, instead it is ${records}`,\n        stage: 'parse event .respondWith(Object)'\n      }\n    }\n    if (typeof links?.next === 'string') {\n      return {\n        data: records,\n        hasMore: true,\n        navigationMode: 'link',\n        href: links.next\n      }\n    }\n    if (hasMore) {\n      return {\n        data: records,\n        hasMore: true,\n        navigationMode: 'after_value'\n      }\n    }\n  }\n  return {\n    error: 'invalid data on RespondsWith, param must be an array, plain object or Response',\n    stage: 'parse event .respondWith(...)'\n  }\n}\n\n/**\n * @param {Response} response - response from fetch\n * @returns {Promise<ParsedResponse | ParseError>} parse result\n */\nasync function parseResponse (response) {\n  if (response.ok) {\n    if (isCSVResponse(response)) {\n      return await parseCSVResponse(response)\n    } else if (isJsonResponse(response)) {\n      return await parseJsonResponse(response)\n    } else if (isJsonLinesResponse(response)) {\n      return await parseJsonLinesResponse(response)\n    } else {\n      return {\n        error: 'invalid response, expected JSON, JSON Lines or CSV response, guarantee that Content-type header is set correctly to \"text/csv\", \"application/json\" or \"application/jsonl\"',\n        stage: 'parse fetch response'\n      }\n    }\n  }\n  return {\n    error: `${response.status} HTTP status code`,\n    stage: 'parse fetch response'\n  }\n}\n\n/**\n * Adds a record to fetch history of an element data loader\n * Each data loader has an history to at most 128 records. Large enough to debug, small enough to not have a big memory footprint\n * @param {HTMLElement} element - target element to get data loader of\n * @param {FetchRecord} record - fetch record to save\n */\nfunction addToFetchHistory (element, record) {\n  const { fetchHistory } = dataLoaderOf(element)\n  fetchHistory.push(record)\n  if (fetchHistory.length > 128) {\n    fetchHistory.shift()\n  }\n  return record\n}\n\n/**\n * @param {HTMLElement} element - target element\n */\nconst getQueryValue = element => element.getAttribute('data-filter') ?? ''\n\n/**\n * @param {HTMLElement} element - target element\n */\nconst getDataSource = element => element.getAttribute('data-src') ?? ''\n\n/**\n * @param {HTMLElement} element - target element\n * @param {Record<string, string>} additionalQueryParams - query parameters to add to resulting url\n */\nconst getUrlToFetch = (element, additionalQueryParams = {}) => {\n  const src = getDataSource(element)\n  if (!src) {\n    return src\n  }\n  const query = getQueryValue(element)\n  const srcURL = new URL(src, window.location.href)\n  if (query) {\n    srcURL.searchParams.set('q', query)\n  }\n  for (const [name, value] of Object.entries(additionalQueryParams)) {\n    srcURL.searchParams.set(name, value)\n  }\n  return srcURL.href\n}\n\n/**\n * @typedef {object} DataLoader\n * @property {() => Promise<ParsedResponse>} fetchData - fetches data and saves to current data\n * @property {() => Promise<ParsedResponse>} fetchNextData - used for paginated options, fetches next page\n * @property {FetchRecord[]} fetchHistory - get fetch history, history is no longer than 128 requests\n * @property {()=>ParsedResponse|undefined} getLatestSuccessResponse - current data for select box\n */\n\n/**\n * @typedef {object} ParsedHasMoreResponse\n * @property {true} hasMore - flag to determine if there is more data after the last element\n * @property {{[prop: string]: string}[]} data - options data\n */\n\n/**\n * @typedef {object} ParsedNoMoreResponse\n * @property {false} hasMore - flag to determine if there is more data after the last element\n * @property {{[prop: string]: string}[]} data - options data\n */\n\n/**\n * @typedef {object} LinkPaginatedParsedResponse\n * @property {\"link\"} navigationMode - navigation mode\n * @property {string} href - link url\n */\n\n/**\n * @typedef {object} AfterLastValuePaginatedParsedResponse\n * @property {\"after_value\"} navigationMode - navigation mode\n */\n\n/**\n * @typedef {ParsedNoMoreResponse | (ParsedHasMoreResponse & (AfterLastValuePaginatedParsedResponse | LinkPaginatedParsedResponse))} ParsedResponse\n */\n\n/**\n * @typedef {object} ParseError\n * @property {string} error - error message\n * @property {string} stage - stage where error happened\n */\n\n/**\n * @typedef {object} FetchRecordLoading\n * @property {DataToFetch} dataToFetch - error message\n * @property {\"sync\"|\"async\"} loadingMode - flag to indicate if the record is being fetched synchronously or asynchronously\n * @property {string} status - fetch status\n * @property {false} completed - completed flag\n * @property {null} result - stage where error happened\n */\n\n/**\n * @typedef {object} FetchRecordCompletedSuccess\n * @property {DataToFetch} dataToFetch - error message\n * @property {\"sync\"|\"async\"} loadingMode - flag to indicate if the record is being fetched synchronously or asynchronously\n * @property {\"completed\"} status - fetch status\n * @property {true} completed - completed flag\n * @property {ParsedResponse} result - stage where error happened\n */\n\n/**\n * @typedef {object} FetchRecordCompletedError\n * @property {DataToFetch} dataToFetch - error message\n * @property {\"sync\"|\"async\"} loadingMode - flag to indicate if the record is being fetched synchronously or asynchronously\n * @property {\"error\"} status - fetch status\n * @property {true} completed - completed flag\n * @property {ParseError} result - stage where error happened\n */\n\n/**\n * @typedef {FetchRecordLoading | FetchRecordCompletedSuccess | FetchRecordCompletedError} FetchRecord\n */\n\n/**\n * @typedef {object} DataToFetch\n * @property {string} query - search filter applied to search\n * @property {string} url - request URL endpoint\n */\n", "/** @import {ParseSelector} from \"typed-query-selector/parser.d.ts\" */\n\n/** @typedef {import('../web-component/dynamic-select.element.js').DynamicSelect} DynamicSelect */\n\nexport const containerEl = shadowQuery('div.container')\nexport const searchInputEl = shadowQuery('input.search-input')\nexport const inputEl = shadowQuery('span.input')\nexport const dropdownEl = shadowQuery('dialog.dropdown')\nexport const valueListEl = shadowQuery('dialog.dropdown > ul.value-list')\nexport const okButtonEl = shadowQuery('dialog.dropdown > .buttons > .ok')\nexport const cancelButtonEl = shadowQuery('dialog.dropdown > .buttons > .cancel')\nexport const getDynamicOptions = shadowQuery('div.dynamic-options:not(.option *)')\n\nexport const dropdownOptionList = shadowQueryAll('li.option-value:not(.option *)')\n\nexport const isSearchInputEl = elementMatcher('input.search-input')\nexport const isDeselectButton = elementMatcher('.multiselect-option[data-value] > button.deselect-option')\nexport const isClearButton = elementMatcher('a.clear-button:not(.option *)')\n\nexport const isDynamicSelectSymbol = Symbol('its-a-dynamic-select')\n\n/**\n * Gets hots DynamicSelect element from a shadow DOM element\n *\n * @param {EventTarget | null} target - target element in shadow DOM\n * @returns {DynamicSelect} host element\n */\nexport function getHostDynamicSelect (target) {\n  if (!(target instanceof Element)) throw Error('target is not an element')\n  const rootNode = target.getRootNode()\n  if (!(rootNode instanceof ShadowRoot)) throw Error('target is not inside a shadow dom')\n  const host = rootNode.host\n  if (!isDynamicSelect(host)) throw Error('target is not inside a Dynamic Select shadow dom')\n  return host\n}\n\n/**\n * @template {string} T\n * @param {T} selector - css selector\n * @returns {(dynamicSelect: DynamicSelect) => ParseSelector<T, Element>} type guarded query function\n */\nfunction shadowQuery (selector) {\n  return (dynamicSelect) => {\n    const result = dynamicSelect.shadowRoot?.querySelector(selector)\n    if (!result) throw Error(`Error: no ${JSON.stringify(selector)} found in dynamic select shadow DOM`)\n    return result\n  }\n}\n\n/**\n * @template {string} T\n * @param {T} selector - css selector\n * @returns {(dynamicSelect: DynamicSelect) => NodeListOf<ParseSelector<T, Element>>} type guarded query function\n */\nfunction shadowQueryAll (selector) {\n  return (dynamicSelect) => {\n    const result = dynamicSelect.shadowRoot?.querySelectorAll(selector)\n    if (result == null) throw Error('shadow is not yet defined')\n    return result\n  }\n}\n\n/**\n * @template {string} T\n * @param {T} selector - selector to match\n */\nfunction elementMatcher (selector) {\n/**\n * @param {EventTarget | null} element - target element\n * @returns {element is ParseSelector<T, Element>} type guarded element matcher\n */\n  return function (element) {\n    return element instanceof Element && element.matches(selector)\n  }\n}\n\n/**\n * @param {Node} node target DOM Node\n * @returns {node is DynamicSelect} true if node is a DynamicSelect web component, false otherwise\n */\nexport function isDynamicSelect (node) {\n  return node ? /** @type {DynamicSelect} */(node)[isDynamicSelectSymbol] === true : false\n}\n", "import { dataLoaderOf } from '../data-loading/fetch-data.js'\nimport { optionElementOfData, dataObjectOfOption } from '../../utils/option-data.js'\nimport { containerEl, getDynamicOptions } from '../../utils/dynamic-select-dom.js'\n/** @import {DynamicSelect} from '../../utils/dynamic-select-dom.js' */\n/** @import {OptionData} from '../../utils/option-data.js' */\n\n/** @type {WeakMap<DynamicSelect, DynamicOptionsData>} */\nconst dataLoaderData = new WeakMap()\n\n/**\n * @param {DynamicSelect} element - target element\n * @returns {DynamicOptionsData} dataloader of element\n */\nexport function dynamicOptionsOf (element) {\n  let dataLoader = dataLoaderData.get(element)\n  if (!dataLoader) {\n    dataLoader = createDynamicOptionsDataFor(new WeakRef(element))\n    dataLoaderData.set(element, dataLoader)\n  }\n  return dataLoader\n}\n\n/**\n * Creates a dataloader for an element\n * @param {WeakRef<DynamicSelect>} elementRef - weak reference of element. We do not want to have any strong reference chain pointing to\n * globally allocated `dataLoaderData`, effectively creating a memory leak\n * @returns {DynamicOptionsData} - created dataloader for element\n */\nfunction createDynamicOptionsDataFor (elementRef) {\n  const getElement = () => {\n    const element = elementRef.deref()\n    if (!element) { throw new Error('element no longer exists') }\n    return element\n  }\n  /** @type {DynamicOptionsData} */\n  const api = {\n    selectedValues: new Set(),\n    get options () {\n      return [...getDynamicOptions(getElement()).querySelectorAll(':scope > option')]\n    },\n    get optionsData () {\n      return api.options.map(option => Object.freeze({ ...dataObjectOfOption(option), origin: 'fetch' }))\n    },\n    get optionsMap () {\n      return Object.fromEntries(api.options.map(option => [option.value, option]))\n    },\n    status: 'empty',\n    loadData: () => loadData(getElement()),\n    loadNextData: () => loadNextData(getElement()),\n    get values () {\n      return Iterator.from(api.options)\n        .filter(option => option.selected)\n        .map(option => option.value)\n        .toArray()\n    },\n    set values (values) {\n      api.selectedValues = new Set(...values)\n      api.options.forEach(option => { option.selected = values.includes(option.value) })\n    },\n\n    toggleValue (value, force) {\n      const selected = force == null ? !api.selectedValues.has(value) : force\n      if (selected) {\n        api.selectedValues.delete(value)\n      } else {\n        api.selectedValues.add(value)\n      }\n      Iterator.from(api.options)\n        .filter(option => option.value === value)\n        .forEach(option => { option.selected = selected })\n    },\n    get selectedOptions () {\n      return Iterator.from(api.options)\n        .filter(option => option.selected)\n        .toArray()\n    }\n  }\n  return api\n}\n\n/**\n * Loads data of dynamic select. Loads first page if paginated\n * @param {DynamicSelect} element - target dynamic select element\n */\nasync function loadData (element) {\n  const loader = dataLoaderOf(element)\n  const dynamicOptionsElement = getDynamicOptions(element)\n  const container = containerEl(element)\n\n  try {\n    const fetchData = loader.fetchData()\n    const isAsync = loader.fetchHistory.at(-1)?.loadingMode === 'async'\n    container.setAttribute('load-mode', isAsync ? 'async' : 'sync')\n    container.toggleAttribute('data-loading', isAsync)\n\n    const result = await fetchData\n    const api = dynamicOptionsOf(element)\n    const { selectedValues } = api\n    const optionsMap = api.optionsMap\n    for (const data of result.data) {\n      const objectData = dataObjectOfData(data, selectedValues)\n      if (optionsMap[objectData.value] == null) {\n        dynamicOptionsElement.append(optionElementOfData(objectData))\n      }\n    }\n  } catch (e) {\n    console.error(e)\n  } finally {\n    container.removeAttribute('data-loading')\n  }\n}\n\n/**\n * Loads next page.\n * @param {DynamicSelect} element - target dynamic select element\n */\nasync function loadNextData (element) {\n  const loader = dataLoaderOf(element)\n  const dynamicOptionsElement = getDynamicOptions(element)\n  try {\n    const result = await loader.fetchNextData()\n    const api = dynamicOptionsOf(element)\n    const { selectedValues } = api\n    const optionsMap = api.optionsMap\n    for (const data of result.data) {\n      const objectData = dataObjectOfData(data, selectedValues)\n      if (optionsMap[objectData.value] == null) {\n        dynamicOptionsElement.append(optionElementOfData(objectData))\n      }\n    }\n  } catch (e) {\n    console.error(e)\n  }\n}\n\n/**\n * get data object of option in a JSON represented format\n *\n * @param {*} optionData - target element in shadow DOM\n * @param {Set<string>} selectedValues - target element in shadow DOM\n * @returns {OptionData} option data\n */\nexport function dataObjectOfData (optionData, selectedValues) {\n  const value = String(optionData.value)\n  return {\n    value,\n    text: optionData.text ?? value,\n    selected: selectedValues.has(value),\n    origin: 'fetch',\n    data: optionData,\n  }\n}\n\n/**\n * get data object of option in a JSON represented format\n *\n * @param {OptionData} optionData - target element in shadow DOM\n * @param {Set<string>} selectedValues - target element in shadow DOM\n * @returns {HTMLOptionElement} option data\n */\nexport function optionFromData (optionData, selectedValues) {\n  const option = optionElementOfData(optionData)\n  option.selected = selectedValues.has(optionData.value)\n  return option\n}\n\n/**\n * @typedef {object} DynamicOptionsData\n *\n * Manages dynamic select's dynamically generated options, be it by fetching it\n * from an URL or other source, such as calling `details.respondWith()` on\n * \"fetch\" event\n *\n * @property {HTMLOptionElement[]} options - List of dynamically generated options\n * @property {OptionData[]} optionsData - `options` mapped to data\n * @property {Set<string>} selectedValues - Dynamically selected values, does not reflect 100% to values:\n *   you can set any list of values on the selected values, but if the option does not exist it will\n *   be excluded on the `values`. When the option exists (is loaded asynchronously), the it will be\n *   it will be automatically added to `values`\n * @property {{[k: string]: HTMLOptionElement}} optionsMap - Map of value to HTMLOptionElement\n * @property {\"loading\"|\"paginated\"|\"fullyLoaded\"|\"empty\"} status Dynamic options state:\n *      - `\"loading\"`: loading data\n *      - `\"paginated\"`: data loaded and has a next page\n *      - `\"fullyLoaded\"`: data loaded. All pages are loaded if paginated\n *      - `\"empty\"`: no data loaded at all\n * @property {() => Promise<void>} loadData - loads data of dynamic select. Loads first page if paginated\n * @property {() => Promise<void>} loadNextData - Loads next page. Only used in paginated data.\n * @property {string[]} values - values applied to select\n * @property {HTMLOptionElement[]} selectedOptions - selected option elements\n * @property {(value: string, selected?: boolean) => void} toggleValue - toggle value of select\n */\n", "/**\n * WeakMap that is iterable with `for..of` and `forEach()` while making the keys referenced\n * weakly with the map, meaning the key can be garbage collected if there is no strong\n * references from the map\n *\n * @class\n * @template {WeakKey} K\n * @template V\n */\nexport class IterableWeakMap {\n  /** @param {Iterable<Readonly<[K, V]>>} [iterable] - initial data of the map */\n  constructor (iterable = []) {\n    for (const [key, value] of iterable) { this.set(key, value) }\n  }\n\n  /** @returns {number} the number of elements in the IterableWeakMap */\n  get size () {\n    return getSize(this)\n  }\n\n  /**\n   * Removes the specified element from the IterableWeakMap.\n   * @param {K} key - target key\n   * @returns {boolean} true if the element was successfully removed, or false if it was not present.\n   */\n  delete (key) {\n    return deleteKey(key, this)\n  }\n\n  /**\n   * Removes all elements from the map.\n   */\n  clear () {\n    clear(this)\n  }\n\n  /**\n   * Executes a provided function once per each key/value pair in the IterableWeakMap, in insertion order.\n   * @param {(value : V, key : K, map : this) => void} callback - forEach callback\n   * @param { unknown } [thisArg] - value of `this` variable in `callback`, optional\n   */\n  forEach (callback, thisArg) {\n    for (const [key, value] of this.entries()) { callback.call(thisArg, value, key, this) }\n  }\n\n  /**\n   * @param {K} key  - key object\n   * @returns {V | undefined} - entry value of found entry with key, undefined if not found\n   */\n  get (key) {\n    return dataOf(this).refWeakMap.get(key)?.value\n  }\n\n  /**\n   * @param {K} key - key object\n   * @returns {boolean} a boolean indicating whether an element with the specified key exists or not\n   */\n  has (key) {\n    return dataOf(this).refWeakMap.has(key)\n  }\n\n  /**\n   * @yields {K} - map entry key\n   * @returns {Generator<K, void>} - generator object of map keys\n   */\n  * keys () {\n    yield * iterateKeys(this)\n  }\n\n  /**\n   * @param {K} key - key target\n   * @param {V} value - value to set or override\n   * @returns {IterableWeakMap<K, V>} the same instance\n   */\n  set (key, value) {\n    const { keySet, refWeakMap } = dataOf(this)\n    const refVal = refWeakMap.get(key)\n    if (refVal !== undefined) {\n      refVal.value = value\n      return this\n    }\n    const ref = new WeakRef(key)\n    refWeakMap.set(key, { ref, value })\n    keySet.add(ref)\n    return this\n  }\n\n  /**\n   * @yields {V} - map entry value\n   * @returns {Generator<V, void>} - generator object of map values\n   */\n  * values () {\n    for (const [, value] of this.entries()) { yield value }\n  }\n\n  /**\n   * @yields {[K, V]} - map entry\n   * @returns {Generator<[K, V], void>} an iterable of key, value pairs for every entry in the IterableWeakMap, in insertion order\n   */\n  * entries () {\n    const { refWeakMap } = dataOf(this)\n    for (const key of this.keys()) {\n      const entry = refWeakMap.get(key)\n      if (entry) {\n        yield [key, entry.value]\n      }\n    }\n  }\n\n  [Symbol.iterator] () {\n    return this.entries()\n  }\n}\n\n/**\n * WeakSet that is iterable with `for..of` and `forEach()` while making the values referenced\n * weakly with the set, meaning the value can be garbage collected if there is no strong\n * references from the value\n *\n * @class\n * @template {WeakKey} V\n */\nexport class IterableWeakSet {\n  /** @param {Iterable<V>} [iterable] - initial data of the set */\n  constructor (iterable = []) {\n    for (const value of iterable) { this.add(value) }\n  }\n\n  /** @returns {number} the number of (unique) elements in Set */\n  get size () {\n    return getSize(this)\n  }\n\n  /**\n   * Deletes a value from the iterable weak set, does nothing if not found\n   * @param {V} value - target value\n   */\n  delete (value) {\n    deleteKey(value, this)\n  }\n\n  /**\n   * Removes all elements from the set.\n   */\n  clear () {\n    clear(this)\n  }\n\n  /**\n   * Executes a provided function once for each value in this set, in insertion order.\n   * @param {(value : V, key : V, set : this) => void} callback - forEach callback\n   * @param { unknown } [thisArg] - value of `this` variable in `callback`, optional\n   */\n  forEach (callback, thisArg) {\n    for (const value of this.entries()) { callback.call(thisArg, value, value, this) }\n  }\n\n  /**\n   * @param {V} value - value\n   * @returns {boolean} a boolean indicating whether an element with the specified value exists in the Set or not\n   */\n  has (value) {\n    return dataOf(this).refWeakMap.has(value)\n  }\n\n  /**\n   * @param {V} value - value to add\n   * @returns {IterableWeakSet<V>} the same instance\n   */\n  add (value) {\n    const { keySet, refWeakMap } = dataOf(this)\n    if (refWeakMap.has(value)) {\n      return this\n    }\n    const ref = new WeakRef(value)\n    refWeakMap.set(value, { ref, value: true })\n    keySet.add(ref)\n    return this\n  }\n\n  /**\n   * @yields {V} - map entry value\n   * @returns {Generator<V, void>} - generator object of set values\n   */\n  * keys () {\n    yield * iterateKeys(this)\n  }\n\n  /**\n   * @yields {V} - map entry value\n   * @returns {Generator<V, void>} - generator object of set values\n   */\n  * values () {\n    yield * iterateKeys(this)\n  }\n\n  /**\n   * @yields {V} - map entry value\n   * @returns {Generator<V, void>} - generator object of set values\n   */\n  * entries () {\n    yield * iterateKeys(this)\n  }\n\n  [Symbol.iterator] () {\n    return this.entries()\n  }\n}\n\n/**\n * @template {WeakKey} K\n * @template V\n * Generates an iterable weak struct key iterator\n * @param {IterableWeakSet<K> | IterableWeakMap<K, V>} struct - target weak struct\n * @yields {K} - weak struck key\n */\nfunction * iterateKeys (struct) {\n  const { keySet } = dataOf(struct)\n  const array = Array.from(keySet)\n  for (const ref of array) {\n    const deref = ref.deref()\n    if (!deref) {\n      keySet.delete(ref)\n      continue\n    }\n    yield deref\n  }\n}\n\n/**\n * Deletes a key from an iterable weak struct\n * @param {WeakKey} key - target key\n * @param {IterableWeakSet<WeakKey> | IterableWeakMap<WeakKey, unknown>} struct - target weak struct\n * @returns {boolean} true if deleted, false if not found\n */\nfunction deleteKey (key, struct) {\n  const { keySet, refWeakMap } = dataOf(struct)\n  const entry = refWeakMap.get(key)\n  if (!entry) return false\n  keySet.delete(entry.ref)\n  refWeakMap.delete(key)\n  return true\n}\n\n/**\n * clears an iterable weak struct\n * @param {IterableWeakSet<WeakKey> | IterableWeakMap<WeakKey, unknown>} struct - target weak struct\n */\nfunction clear (struct) {\n  const { keySet, refWeakMap } = dataOf(struct)\n  const array = Array.from(keySet)\n  for (const ref of array) {\n    const deref = ref.deref()\n    if (deref) {\n      refWeakMap.delete(deref)\n    }\n  }\n  keySet.clear()\n}\n\n/**\n * Gets actual size of iterable weak struct\n * @param {IterableWeakSet<WeakKey> | IterableWeakMap<WeakKey, unknown>} struct - target weak struct\n */\nfunction getSize (struct) {\n  const { keySet } = dataOf(struct)\n  keySet.forEach(ref => { if (!ref.deref()) { keySet.delete(ref) } })\n  return keySet.size\n}\n\nconst dataOf = (() => {\n  /**\n   * @type {WeakMap<WeakKey, IterableWeakMapData<never, never>>} valueMap\n   */\n  const map = new WeakMap()\n\n  /**\n   * @template {WeakKey} K\n   * @template V\n   * @param {IterableWeakSet<K> | IterableWeakMap<K, V>} iter - target weak struct to initialize\n   * @returns {IterableWeakMapData<K, V>} target weak struct data\n   */\n  function init (iter) {\n    const keySet = new Set()\n    const refWeakMap = new WeakMap()\n    const result = {\n      keySet,\n      refWeakMap,\n    }\n    map.set(iter, result)\n    return result\n  }\n\n  /**\n   * @template {WeakKey} K\n   * @template V\n   * @param {IterableWeakSet<K> | IterableWeakMap<K, V>} iter - target weak struct\n   * @returns {IterableWeakMapData<K, V>} target weak struct data\n   */\n  function getData (iter) {\n    return map.get(iter) ?? init(iter)\n  }\n  return getData\n})()\n\n/**\n * @template {WeakKey} K\n * @template V\n * @typedef {object} IterableWeakMapData\n * @property {WeakMap<K, {ref: WeakRef<K> , value: V}>} refWeakMap - weakmap of weak refs and values\n * @property {Set<WeakRef<K>>} keySet - iterable set of weak keys\n */\n", "import { IterableWeakMap, IterableWeakSet } from './iterable-weak-struct.js'\n\nconst portraitMobileMatchMedia = window.matchMedia('(max-width: 576px) and (orientation: portrait)')\nconst landscapeMobileMatchMedia = window.matchMedia('(max-width: 768px) and (orientation: landscape)')\n\nexport const hasTouchScreen = () => 'ontouchstart' in window || navigator.maxTouchPoints > 0\n\nexport const isPortraitMobile = () => portraitMobileMatchMedia.matches && hasTouchScreen()\nexport const isLandscapeMobile = () => landscapeMobileMatchMedia.matches && hasTouchScreen()\n\nexport const isMobile = () => isPortraitMobile() || isLandscapeMobile()\n\n/**\n * Map of created observers with its data\n * @type {IterableWeakMap<MobileDetectionObserver, MobileDetectionObserverData>}\n */\nconst observerData = new IterableWeakMap()\n\n/**\n *\n */\nfunction updateData () {\n  const isNowMobile = isMobile()\n  for (const data of observerData.values()) {\n    const { currentIsMobile, observingNodes, callback } = data\n    if (currentIsMobile === isNowMobile) { continue }\n    data.currentIsMobile = isNowMobile\n    const events = Iterator.from(observingNodes).map(element => ({\n      target: element,\n      isMobile: isNowMobile\n    })).toArray()\n    callback(events)\n  }\n}\n\nlet observeMatchMedia = () => {\n  portraitMobileMatchMedia.addEventListener('change', updateData)\n  landscapeMobileMatchMedia.addEventListener('change', updateData)\n  observeMatchMedia = () => {}\n}\n\nexport class MobileDetectionObserver {\n  /** @type {MobileDetectionObserverData} */\n  #data\n  /**\n   * @param {MobileDetectionObserverCallback} callback - observer callback\n   */\n  constructor (callback) {\n    this.#data = {\n      callback,\n      observingNodes: new IterableWeakSet(),\n      currentIsMobile: undefined\n    }\n    observerData.set(this, this.#data)\n  }\n\n  /**\n   * @param {Node} node - target element to observe\n   */\n  observe (node) {\n    observeMatchMedia()\n    const data = this.#data\n    if (data.currentIsMobile === undefined) {\n      data.currentIsMobile = isMobile()\n    }\n    const { currentIsMobile, callback, observingNodes } = data\n    observingNodes.add(node)\n    callback([{\n      target: node,\n      isMobile: currentIsMobile\n    }])\n  }\n}\n\n/**\n * @typedef {object} MobileDetectionObserverData\n * @property {boolean} [currentIsMobile] - flag saved on observer to determine if the mode changed\n * @property {MobileDetectionObserverCallback} callback - observer callback\n * @property {IterableWeakSet<Node>} observingNodes - observer callback\n */\n\n/**\n * @callback MobileDetectionObserverCallback\n * @param {MobileStateMutationRecord[]} mutations - mutations happened for each observing element\n */\n\n/**\n * @typedef {object} MobileStateMutationRecord\n * @property {Node} target - observing element\n * @property {boolean} isMobile - flag to determine if it's on mobile mode\n */\n", "import { dropdownEl } from '../../utils/dynamic-select-dom.js'\nimport { isMobile } from '../../utils/mobile-detection.js'\nimport { IterableWeakSet } from '../../utils/iterable-weak-struct.js'\n/** @import {DynamicSelect} from '../../utils/dynamic-select-dom.js' */\n\n/**\n * @returns {boolean} true if dropdown should be centered on screen instead\n * of being anchored to the select box\n */\nexport function shouldCenterDropdown () {\n  return isMobile()\n}\n\nconst positionFixer = (() => {\n  /** @type {IterableWeakSet<DynamicSelect>} */\n  const selectBoxes = new IterableWeakSet()\n\n  const viewport = window.visualViewport\n  if (!viewport) {\n    return {\n      applyOnSelect () {},\n    }\n  }\n\n  const startListening = () => {\n    viewport.addEventListener('scroll', handler)\n    viewport.addEventListener('resize', handler)\n  }\n\n  const stopListening = () => {\n    viewport.removeEventListener('scroll', handler)\n    viewport.removeEventListener('resize', handler)\n  }\n\n  const updateDropdownPosition = (element) => {\n    const offsetLeft = viewport.offsetLeft\n    const offsetTop = viewport.offsetTop\n\n    const boundingRect = element.getBoundingClientRect()\n\n    const left = offsetLeft + (viewport.width - boundingRect.width) / 2\n    const top = offsetTop + (viewport.height - boundingRect.height) / 2\n\n    // You could also do this by setting style.left and style.top if you\n    // use width: 100% instead.\n    element.style.transform = `translate(${left}px, ${top}px) scale(${1 / viewport.scale})`\n    element.style.transformOrigin = 'top left'\n  }\n\n  const handler = () => {\n    if (selectBoxes.size <= 0) {\n      stopListening()\n      return\n    }\n    for (const select of selectBoxes) {\n      if (!select.open) {\n        selectBoxes.delete(select)\n        continue\n      }\n      updateDropdownPosition(dropdownEl(select))\n    }\n  }\n\n  /**\n   * @param {DynamicSelect} dynamicSelect - target dynamic select\n   */\n  const applyOnSelect = (dynamicSelect) => {\n    selectBoxes.add(dynamicSelect)\n    if (dynamicSelect.open) {\n      const dropdown = dropdownEl(dynamicSelect)\n      updateDropdownPosition(dropdown)\n      // apply twice because first `getBoundingClientRect` is not applying in updated transformation\n      updateDropdownPosition(dropdown)\n    }\n    startListening()\n  }\n\n  return {\n    applyOnSelect\n  }\n})()\n\n/**\n * Updated dropdown content based on the content in dynamic select in light DOM\n * @param {DynamicSelect} dynamicSelect - web component element reference\n */\nexport function centerDropdownPosition (dynamicSelect) {\n  const dropdown = dropdownEl(dynamicSelect)\n  positionFixer.applyOnSelect(dynamicSelect)\n  dropdown.classList.remove('top-direction', 'left-direction')\n  dropdown.style.marginTop = ''\n  dropdown.style.marginLeft = ''\n}\n", "import { dropdownEl, inputEl, isDynamicSelect } from '../../utils/dynamic-select-dom.js'\nimport { centerDropdownPosition, shouldCenterDropdown } from '../centers-dropdown-to-screen-on-mobile/dropdown-mobile-centering.js'\n/** @import {DynamicSelect} from '../../utils/dynamic-select-dom' */\n\n/** @type {WeakMap<DynamicSelect, DropdownPositionUpdater>} */\nconst dataLoaderData = new WeakMap()\n\nconst intersectionObserver = new IntersectionObserver(records => {\n  const selects = new Set(Iterator.from(records)\n    .filter(record => !record.isIntersecting)\n    .map(record => record.target)\n    .filter(isDynamicSelect))\n  selects.forEach(select => {\n    select.open = false\n    dropdownPositionUpdaterOf(select).stopAnchoringToSelect()\n  })\n})\n\n/**\n * @param {DynamicSelect} element - target element\n * @returns {DropdownPositionUpdater} dataloader of element\n */\nexport function dropdownPositionUpdaterOf (element) {\n  let dataLoader = dataLoaderData.get(element)\n  if (!dataLoader) {\n    dataLoader = createDropdownPositionUpdaterFor(new WeakRef(element))\n    dataLoaderData.set(element, dataLoader)\n  }\n  return dataLoader\n}\n\n/**\n * Creates a dataloader for an element\n * @param {WeakRef<DynamicSelect>} elementRef - weak reference of element. We do not want to have any strong reference chain pointing to\n * globally allocated `dataLoaderData`, effectively creating a memory leak\n * @returns {DropdownPositionUpdater} - created dataloader for element\n */\nfunction createDropdownPositionUpdaterFor (elementRef) {\n  const getElement = () => {\n    const element = elementRef.deref()\n    if (!element) {\n      removeListenersForPotentialPositionChange()\n      throw new Error('element no longer exists')\n    }\n    return element\n  }\n  const potentialPositionChangeCallback = () => {\n    const element = getElement()\n    if (!element.open) {\n      api.stopAnchoringToSelect()\n      return\n    }\n    updateDropdownPosition(element)\n  }\n\n  const addScrollListener = () => document.defaultView?.addEventListener('scroll', potentialPositionChangeCallback, true)\n  const removeScrollListener = () => document.defaultView?.removeEventListener('scroll', potentialPositionChangeCallback, true)\n  const addResizeListener = () => document.defaultView?.addEventListener('resize', potentialPositionChangeCallback)\n  const removeResizeListener = () => document.defaultView?.removeEventListener('resize', potentialPositionChangeCallback)\n  const addListenersForPotentialPositionChange = () => {\n    addScrollListener()\n    addResizeListener()\n  }\n\n  const removeListenersForPotentialPositionChange = () => {\n    removeScrollListener()\n    removeResizeListener()\n  }\n\n  /** @type {DropdownPositionUpdater} */\n  const api = {\n    startAnchoringToSelect: () => {\n      const element = getElement()\n      updateDropdownPosition(element)\n      addListenersForPotentialPositionChange()\n      intersectionObserver.observe(element)\n    },\n    stopAnchoringToSelect () {\n      const element = getElement()\n      intersectionObserver.unobserve(element)\n      removeListenersForPotentialPositionChange()\n    }\n  }\n  return api\n}\n\n/**\n * Update dropdown content based on the content in dynamic select in light DOM\n * @param {DynamicSelect} dynamicSelect - web component element reference\n */\nexport function updateDropdownPosition (dynamicSelect) {\n  if (shouldCenterDropdown()) {\n    centerDropdownPosition(dynamicSelect)\n    return\n  }\n  const dropdown = dropdownEl(dynamicSelect)\n  const input = inputEl(dynamicSelect)\n  const clientRect = input.getBoundingClientRect()\n  dropdown.style.minWidth = `${clientRect.width}px`\n  const viewportRect = getViewportRect()\n  const isTopDirection = clientRect.bottom + dropdown.clientHeight > viewportRect.height\n  const isLeftDirection = clientRect.left + dropdown.clientWidth > viewportRect.width\n  const xPosition = isTopDirection ? clientRect.top : clientRect.bottom\n  const yPosition = isLeftDirection ? Math.min(viewportRect.width, clientRect.right) : Math.max(0, clientRect.left)\n  dropdown.classList.toggle('top-direction', isTopDirection)\n  dropdown.classList.toggle('left-direction', isLeftDirection)\n  dropdown.style.marginTop = `${xPosition}px`\n  dropdown.style.marginLeft = `${yPosition}px`\n}\n\n/**\n * @returns {DOMRectReadOnly} viewport rect\n */\nfunction getViewportRect () {\n  const { visualViewport } = window\n  if (!visualViewport) {\n    return new DOMRectReadOnly(0, 0, window.innerWidth, window.innerHeight)\n  }\n  const { offsetLeft, offsetTop, width, height } = visualViewport\n  return new DOMRectReadOnly(offsetLeft, offsetTop, width, height)\n}\n\n/**\n * @typedef {object} DropdownPositionUpdater\n * @property {() => void} startAnchoringToSelect - starts anchoring to select until select is not visible,\n *   at that point it closes the dropdown\n * @property {() => void} stopAnchoringToSelect - stop anchoring to select\n */\n", "/**\n * Traverse up in the document DOM closest element by passing shadow DOM\n * @param {Element} targetElement - first element to yield from the generator\n * @yields {Element} one element for each subsequent ancestor\n */\nexport function * traverseUpDom (targetElement) {\n  let el = targetElement\n  while (el != null) {\n    yield el\n    const { parentNode, parentElement } = el\n    if (parentNode instanceof ShadowRoot) {\n      el = parentNode.host\n      continue\n    }\n    if (parentNode instanceof Document || parentElement == null) {\n      return\n    }\n    el = parentElement\n  }\n}\n", "import { traverseUpDom } from './traverse-up-dom.js'\n\n/**\n * @param {Element} element - target element\n * @returns {string} fallback language\n */\nfunction getFallbackLanguage (element) {\n  const root = element.ownerDocument.defaultView ?? globalThis\n  if (!root.navigator) {\n    // OS/node/browser independent way of obtaining the default locale\n    return Intl.DateTimeFormat().resolvedOptions().locale\n  }\n  const langs = root.navigator.languages || [root.navigator.language]\n  return langs[0]\n}\n\n/**\n * @param {Element} element - element with invalid lang attribute\n * @returns {string} corrected language\n */\nfunction handleInvalidLanguage (element) {\n  if (element === element.ownerDocument.documentElement) {\n    return getFallbackLanguage(element)\n  } else if (element.parentNode instanceof ShadowRoot) {\n    return getLanguageFromElement(element.parentNode.host)\n  }\n  return getLanguageFromElement(element.parentElement)\n}\n\n/**\n * Gets the currently applied language of element, get default locale otherwise\n * @param {Element | null} element - target element\n * @returns {string} element language\n */\nexport function getLanguageFromElement (element) {\n  if (element == null) {\n    return Intl.DateTimeFormat().resolvedOptions().locale\n  }\n  for (const node of traverseUpDom(element)) {\n    const langValue = node.getAttribute('lang')\n    if (!langValue) continue\n    try {\n      const locale = new Intl.Locale(langValue)\n      const { language, region } = locale\n      if (region == null) {\n        return language\n      }\n      return `${language}-${region}`\n    } catch {\n      return handleInvalidLanguage(node)\n    }\n  }\n\n  return getFallbackLanguage(element)\n}\n", "import { okButtonEl, cancelButtonEl, isDynamicSelect } from '../../utils/dynamic-select-dom.js'\nimport { getLanguageFromElement } from '../../utils/get-lang-from-element.util.js'\n/** @import {DynamicSelect} from '../../utils/dynamic-select-dom' */\n\nexport const i18nButtonLabels = Object.freeze({\n  ok: {\n    default: 'OK',\n    es: 'Aceptar',\n    ar: '\u0645\u0648\u0627\u0641\u0642',\n    hi: '\u0920\u0940\u0915 \u0939\u0948',\n    tr: 'Tamam',\n    zh: '\u786E\u5B9A',\n    ko: '\uD655\uC778',\n\n  },\n\n  cancel: {\n    default: 'Cancel',\n    es: 'Cancelar',\n    zh: '\u53D6\u6D88',\n    hi: '\u0930\u0926\u094D\u0926 \u0915\u0930\u0947\u0902',\n    ar: '\u0625\u0644\u063A\u0627\u0621',\n    tr: '\u0130ptal',\n    fr: 'Annuler',\n    pt: 'Cancelar',\n    ru: '\u041E\u0442\u043C\u0435\u043D\u0430',\n    id: 'Batal',\n    de: 'Abbrechen',\n    ja: '\u30AD\u30E3\u30F3\u30BB\u30EB',\n    vi: 'H\u1EE7y',\n    ko: '\uCDE8\uC18C',\n    it: 'Annulla',\n    pl: 'Anuluj',\n    uk: '\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438',\n  }\n})\n\nconst mutationObserver = new MutationObserver(records => {\n  for (const record of records) {\n    const { target } = record\n    if (!isDynamicSelect(target) || !target.open) {\n      continue\n    }\n\n    const lang = getLanguageFromElement(target)\n    const locale = new Intl.Locale(lang)\n    const language = locale.language\n    const okButton = okButtonEl(target)\n    okButton.textContent = i18nButtonLabels.ok[language] ?? i18nButtonLabels.ok.default\n    const cancelButton = cancelButtonEl(target)\n    cancelButton.textContent = i18nButtonLabels.cancel[language] ?? i18nButtonLabels.cancel.default\n  }\n})\n\nconst mutationObserverInit = { attributeFilter: ['open'] }\n\n/**\n * @param {DynamicSelect} select - target select\n */\nexport function applyI18nOnSelectInputs (select) {\n  mutationObserver.observe(select, mutationObserverInit)\n}\n", "import html from './dynamic-select.element.html.generated.js'\nimport css from './dynamic-select.element.css.generated.js'\nimport { applyTemplate } from '../utils/templater.js'\nimport { isPlainObject } from '../utils/object.js'\nimport { dataObjectOfOption } from '../utils/option-data.js'\nimport { templatesOf } from '../features/templates/templates.js'\nimport { configurationOf } from '../features/configuration/configuration.js'\nimport { dynamicOptionsOf } from '../features/dynamic-loaded-options/dynamic-option.js'\nimport { computeOnce } from '../utils/memoization.js'\nimport * as dom from '../utils/dynamic-select-dom.js'\nimport { dropdownPositionUpdaterOf, updateDropdownPosition } from '../features/dropdown-reflects-select-position-and-visibility/dropdown-position-updater.js'\nimport { isMobile, MobileDetectionObserver } from '../utils/mobile-detection.js'\nimport { applyI18nOnSelectInputs } from '../features/dropdown-inputs-are-internationalized/dropdown-i18n.js'\n/** @import { OptionData } from '../utils/option-data' */\n\nconst loadTemplate = computeOnce(() => {\n  const templateElement = document.createElement('template')\n  templateElement.innerHTML = html\n  return templateElement\n})\n\nconst loadStyles = computeOnce(() => {\n  const sheet = new CSSStyleSheet()\n  sheet.replaceSync(css)\n  return sheet\n})\n\nconst { searchInputEl, inputEl, dropdownEl, valueListEl, dropdownOptionList, getHostDynamicSelect, containerEl } = dom\nconst { isSearchInputEl, isDeselectButton, isClearButton, isDynamicSelect } = dom\n\nconst optionsObserver = new MutationObserver(mutations => {\n\n})\n\n/** @type {MutationObserverInit} */\nconst optionsObserverOptions = {\n  childList: true,\n  subtree: true,\n  attributes: true,\n  attributeFilter: ['data-of-option']\n}\n\nconst mobileDetectionObserver = new MobileDetectionObserver(mutations => {\n  for (const mutation of mutations) {\n    const { target, isMobile } = mutation\n    if (!isDynamicSelect(target)) { continue }\n    target.open = false\n    const uiModeStyleValue = getComputedStyle(target).getPropertyValue('--ui-mode')\n    const uiModeParsed = uiModeStyleValue.trim().toLowerCase()\n    const uiMode = ['mobile', 'desktop'].includes(uiModeParsed) ? uiModeParsed : null\n    containerEl(target).setAttribute('data-ui-mode', uiMode ?? (isMobile ? 'mobile' : 'desktop'))\n    updateButtonContent(target)\n  }\n})\n\n/** @type {WeakMap<DynamicSelect, Set<string>>} */\nconst selectedOptionWeakMap = new WeakMap()\n\nexport class DynamicSelect extends HTMLElement {\n  constructor () {\n    super()\n    const shadowRoot = this.attachShadow({ mode: 'open' })\n    shadowRoot.adoptedStyleSheets = [loadStyles()]\n    const template = loadTemplate()\n    shadowRoot.append(document.importNode(template.content, true))\n\n    searchInputEl(this).addEventListener('input', handleSearchInputChange)\n    inputEl(this).addEventListener('click', handleSelectValueButtonClick)\n    searchInputEl(this).addEventListener('keydown', handleSearchInputKeyDown)\n    dropdownEl(this).addEventListener('toggle', handleDropdownToggle)\n    dropdownEl(this).addEventListener('pointerdown', handleDropdownPointerDown)\n    dropdownEl(this).addEventListener('click', handleDropdownOptionClick)\n    dom.okButtonEl(this).addEventListener('click', handleOkButtonClick)\n    dom.cancelButtonEl(this).addEventListener('click', handleCancelButtonClick)\n    optionsObserver.observe(this, optionsObserverOptions)\n    mobileDetectionObserver.observe(this)\n    applyI18nOnSelectInputs(this)\n  }\n\n  connectedCallback () {\n    updateDropdownContent(this)\n    updateButtonContent(this)\n  }\n\n  get searchFilter () {\n    return this.getAttribute('data-filter') ?? ''\n  }\n\n  set searchFilter (newSearchFilter) {\n    if (newSearchFilter === '' || newSearchFilter == null) {\n      this.removeAttribute('data-filter')\n    }\n    this.setAttribute('data-filter', String(newSearchFilter))\n  }\n\n  get value () {\n    return this.valueAsArray[0] ?? ''\n  }\n\n  set value (value) {\n    if (typeof value !== 'string') return\n    this.valueAsArray = [value]\n  }\n\n  get valueAsArray () {\n    let iterator = Iterator.from(this.selectedOptions).map(option => option.value)\n    if (!this.multiple) {\n      iterator = iterator.take(1)\n    }\n    return iterator.toArray()\n  }\n\n  set valueAsArray (valueAsArray) {\n    if (!Array.isArray(valueAsArray)) { return }\n    Iterator.from(this.options).forEach(option => {\n      option.selected = valueAsArray.includes(option.value)\n    })\n    dynamicOptionsOf(this).values = valueAsArray\n  }\n\n  get valueAsObjects () {\n    let iterator = Iterator.from(this.selectedOptions)\n      .map(dataObjectOfOption)\n      .map(info => info.data)\n    if (!this.multiple) {\n      iterator = iterator.take(1)\n    }\n    return iterator.toArray()\n  }\n\n  set valueAsObjects (valueAsObjects) {\n    if (!Array.isArray(valueAsObjects)) { return }\n    const isValidValue = (value) => typeof value === 'string' || !isNaN(value)\n    const validValueEntries = Iterator.from(valueAsObjects)\n      .filter(isPlainObject)\n      .filter(obj => isValidValue(obj.value))\n      .map(obj => [obj.value, obj])\n    const map = Object.fromEntries(validValueEntries)\n    Iterator.from(this.options).forEach(option => {\n      const data = map[option.value]\n      if (data) {\n        option.selected = false\n        return\n      }\n      option.selected = true\n      if (isPlainObject(data)) {\n        const { text, value, ...rest } = data\n        if (Object.keys(rest).length > 0) {\n          option.setAttribute('data-of-option', JSON.stringify(data))\n        }\n      }\n    })\n  }\n\n  get open () {\n    return this.hasAttribute('open')\n  }\n\n  set open (openBool) {\n    if (typeof openBool === 'boolean') {\n      this.toggleAttribute('open', openBool)\n    }\n  }\n\n  get [dom.isDynamicSelectSymbol] () { return true }\n\n  get multiple () {\n    return this.hasAttribute('multiple')\n  }\n\n  set multiple (multipleBool) {\n    if (typeof multipleBool === 'boolean') {\n      this.toggleAttribute('multiple', multipleBool)\n    }\n  }\n\n  static get observedAttributes () {\n    return ['open', 'data-filter']\n  }\n\n  get options () {\n    return [...this.querySelectorAll('option'), ...dynamicOptionsOf(this).options]\n  }\n\n  get selectedOptions () {\n    const { options } = this\n    const result = Iterator.from(options).filter(option => option.selected).toArray()\n    if (result.length || this.multiple) {\n      return result\n    }\n    const firstOption = options[0]\n    if (!firstOption) {\n      return []\n    }\n    firstOption.selected = true\n    return [firstOption]\n  }\n\n  get src () {\n    return this.querySelectorAll('option[selected]')\n  }\n\n  /**\n   * @param {string} name - attribute name\n   * @param {string} oldValue - previous attribute value\n   * @param {string} newValue - current attribute value\n   */\n  attributeChangedCallback (name, oldValue, newValue) {\n    switch (name) {\n      case 'open':\n        if (this.open) {\n          const isOnMobile = isMobile()\n          if (isOnMobile) {\n            dropdownEl(this).showModal()\n          } else {\n            dropdownEl(this).showPopover()\n          }\n          const loadData = dynamicOptionsOf(this).loadData()\n          dropdownPositionUpdaterOf(this).startAnchoringToSelect()\n          updateDropdownContent(this)\n          if (isOnMobile) {\n            // no need to open on-screen keyboard\n            searchInputEl(this).blur()\n          }\n          loadData.then(() => {\n            updateDropdownContent(this)\n          })\n        } else {\n          selectedOptionWeakMap.delete(this)\n          if (isMobile()) {\n            dropdownEl(this).close()\n          } else {\n            dropdownEl(this).hidePopover()\n          }\n          dropdownPositionUpdaterOf(this).stopAnchoringToSelect()\n        }\n        break\n      case 'data-filter':\n        searchInputEl(this).value = newValue\n        updateDropdownContent(this)\n        dynamicOptionsOf(this).loadData().then(() => {\n          updateDropdownContent(this)\n        })\n    }\n  }\n}\n\n/**\n * Updates dropdown content based on the content in dynamic select in light DOM\n * @param {DynamicSelect} dynamicSelect - web component element reference\n * @returns {{\n *    ungroupedOptions: OptionData[],\n *    optionGroups: {[groupName:string]: OptionData[]}\n * }} - dropdown data\n */\nfunction getDropdownListData (dynamicSelect) {\n  const ungroupedOptions = []\n  const optionGroups = ({})\n\n  for (const option of dynamicSelect.querySelectorAll(':scope > option')) {\n    ungroupedOptions.push(dataObjectOfOption(option))\n  }\n  for (const option of dynamicSelect.querySelectorAll(':scope > optgroup option')) {\n    const groupName = option.closest('optgroup')?.label\n    const data = dataObjectOfOption(option)\n\n    if (!groupName) {\n      ungroupedOptions.push(data)\n    } else {\n      optionGroups[groupName] ??= []\n      optionGroups[groupName].push(data)\n    }\n  }\n\n  const { optionsData } = dynamicOptionsOf(dynamicSelect)\n  for (const data of optionsData) {\n    const groupName = data.data.group?.toString()\n    if (!groupName) {\n      ungroupedOptions.push(data)\n    } else {\n      optionGroups[groupName] ??= []\n      optionGroups[groupName].push(data)\n    }\n  }\n\n  const { searchFilter } = dynamicSelect\n  const { minQueryLength } = configurationOf(dynamicSelect)\n\n  if (typeof searchFilter === 'string' && searchFilter.trim() !== '' && searchFilter.length >= minQueryLength) {\n    const matchFilter = filterMatcher(searchFilter)\n    const filteredUngrouped = ungroupedOptions.filter((option) => matchFilter(option.text))\n    const filteredOptionGroups = ({})\n\n    for (const [groupName, options] of Object.entries(optionGroups)) {\n      if (matchFilter(groupName)) {\n        filteredOptionGroups[groupName] = options\n        continue\n      }\n      const filteredOptions = options.filter((option) => matchFilter(option.text))\n      if (filteredOptions.length > 0) {\n        filteredOptionGroups[groupName] = filteredOptions\n      }\n    }\n    return {\n      ungroupedOptions: filteredUngrouped,\n      optionGroups: filteredOptionGroups\n    }\n  }\n\n  return { ungroupedOptions, optionGroups }\n}\n\n/**\n * Updates dropdown content based on the content in dynamic select in light DOM\n * @param {DynamicSelect} dynamicSelect - web component element reference\n * @returns {{\n *    ungroupedOptions: (OptionData & {checkedIndicatorType: \"radio\" | \"checkbox\"})[],\n *    optionGroups: {groupName:string, options: (OptionData & {checkedIndicatorType: \"radio\" | \"checkbox\"})[]}[]\n * }} - dropdown data\n */\nfunction getDropdownTemplateData (dynamicSelect) {\n  const { ungroupedOptions, optionGroups } = getDropdownListData(dynamicSelect)\n\n  const checkedIndicatorType = dynamicSelect.multiple ? 'checkbox' : 'radio'\n  const dropdownOptions = [...dropdownOptionList(dynamicSelect)]\n  let focusIndex = dropdownOptions.findIndex(el => el.hasAttribute('data-focused'))\n  return {\n    ungroupedOptions: ungroupedOptions.map(option => ({ ...option, checkedIndicatorType, focused: focusIndex-- === 0 })),\n    optionGroups: Object.entries(optionGroups).map(([groupName, options]) => ({ groupName, options: options.map(option => ({ ...option, checkedIndicatorType, focused: focusIndex-- === 0 })) }))\n  }\n}\n\n/**\n * Create a predicate as option filter on dropdown\n * @param {string} filter - filter value, generally the filter input on the dropdown\n * @returns {(text: string) => boolean} filter predicate\n */\nconst filterMatcher = (filter) => {\n  const caseInsensitiveFilter = filter.trim().toLocaleLowerCase()\n  return (text) => text.toLowerCase().includes(caseInsensitiveFilter)\n}\n\n/**\n * Updates dropdown content based on the content in dynamic select in light DOM\n * @param {DynamicSelect} dynamicSelect - web component element reference\n */\nfunction updateDropdownContent (dynamicSelect) {\n  const dropdownData = getDropdownTemplateData(dynamicSelect)\n  const { dropdownList, option: optionTemplate, loadingNotification } = templatesOf(dynamicSelect)\n  const listFragment = applyTemplate(dropdownList, dropdownData)\n  listFragment.querySelectorAll('slot[name=\"option\"]').forEach(slot => {\n    const data = JSON.parse(slot.dataset.value || '{}')\n    slot.replaceWith(applyTemplate(optionTemplate, data))\n  })\n  listFragment.querySelectorAll('slot[name=\"loading-notification\"]').forEach(slot => {\n    slot.replaceWith(applyTemplate(loadingNotification, dropdownData))\n  })\n\n  const valueList = valueListEl(dynamicSelect)\n  valueList.replaceChildren(listFragment)\n}\n\n/**\n * Updates button content based on the content in dynamic select in light DOM\n * @param {DynamicSelect} dynamicSelect - web component element reference\n */\nfunction updateButtonContent (dynamicSelect) {\n  const { option: optionTemplate, multiSelectInput, mobileMultiSelectInput, singleSelectInput } = templatesOf(dynamicSelect)\n  const isMultiple = dynamicSelect.multiple\n  const buttonTemplate = isMultiple ? isMobile() ? mobileMultiSelectInput : multiSelectInput : singleSelectInput\n  const selectedOptionsVal = dynamicSelect.selectedOptions.map(dataObjectOfOption)\n  const data = {\n    isMultiple,\n    isSingle: !isMultiple,\n    selectedOptions: selectedOptionsVal,\n    selectedOption: selectedOptionsVal[0],\n  }\n  const button = applyTemplate(buttonTemplate, data)\n  button.querySelectorAll('slot[name=\"selected-option\"]').forEach(slot => {\n    const data = JSON.parse(slot.dataset.value || '{}')\n    slot.replaceWith(applyTemplate(optionTemplate, data))\n  })\n  inputEl(dynamicSelect).replaceChildren(button)\n}\n\n/**\n * @param {Event} event - input event\n */\nfunction handleSearchInputChange (event) {\n  const { target } = event\n  if (!isSearchInputEl(target)) return\n  const dynamicSelect = getHostDynamicSelect(target)\n  dynamicSelect.searchFilter = target.value\n}\n\n/**\n * @param {KeyboardEvent} event - input event\n */\nfunction handleSearchInputKeyDown (event) {\n  const { target, code } = event\n  console.log('AAA')\n  const focusAttr = 'data-focused'\n  if (code === 'ArrowDown' || code === 'ArrowUp') {\n    const dynamicSelect = getHostDynamicSelect(target)\n    const dropdownOptions = [...dropdownOptionList(dynamicSelect)]\n    if (dropdownOptions.length <= 0) { return }\n    const focusIndex = dropdownOptions.findIndex(el => el.hasAttribute(focusAttr))\n    if (focusIndex >= 0) {\n      dropdownOptions[focusIndex].removeAttribute(focusAttr)\n    }\n    if (event.code === 'ArrowDown') {\n      const nextFocusIndex = focusIndex + 1 >= dropdownOptions.length ? 0 : focusIndex + 1\n      dropdownOptions[nextFocusIndex].setAttribute(focusAttr, '')\n    } else {\n      const previousFocusIndex = focusIndex <= 0 ? dropdownOptions.length - 1 : focusIndex - 1\n      dropdownOptions[previousFocusIndex].setAttribute(focusAttr, '')\n    }\n  } else if (code === 'Enter') {\n    const dynamicSelect = getHostDynamicSelect(target)\n    const dropdownOptions = [...dropdownOptionList(dynamicSelect)]\n    const focusedElement = dropdownOptions.find(el => el.hasAttribute('data-focused'))\n    if (focusedElement instanceof HTMLLIElement) {\n      const value = focusedElement.dataset.value\n      if (typeof value !== 'string') return\n      handleDropdownSelect(value, dynamicSelect)\n    }\n  }\n}\n\n/**\n * @param {Event} event - input event\n */\nfunction handleSelectValueButtonClick (event) {\n  const { target } = event\n  if (isDeselectButton(target)) {\n    const option = target.closest('.multiselect-option')\n    if (!(option instanceof HTMLElement)) { return }\n    const value = option.dataset.value\n    const dynamicSelect = getHostDynamicSelect(option)\n    const selectOption = dynamicSelect.selectedOptions.find(option => option.value === value)\n    if (selectOption == null) { return }\n    selectOption.selected = false\n    dynamicOptionsOf(dynamicSelect).toggleValue(selectOption.value, false)\n    updateButtonContent(dynamicSelect)\n  } else if (isClearButton(target)) {\n    const dynamicSelect = getHostDynamicSelect(target)\n    dynamicSelect.valueAsArray = []\n    updateButtonContent(dynamicSelect)\n  } else {\n    const dynamicSelect = getHostDynamicSelect(event.target)\n    dynamicSelect.open = !dynamicSelect.open\n  }\n}\n\n/**\n * @param {Event} event - input event\n */\nfunction handleDropdownToggle (event) {\n  const dynamicSelect = getHostDynamicSelect(event.target)\n  dynamicSelect.open = dropdownEl(dynamicSelect).matches(':popover-open,:open')\n}\n\n/**\n * @param {PointerEvent} event - input event\n */\nfunction handleDropdownPointerDown (event) {\n  const { target, currentTarget, clientX, clientY } = event\n  const isClickingOnDialog = target === currentTarget\n  if (isClickingOnDialog && currentTarget instanceof HTMLElement) {\n    const { left, right, bottom, top } = currentTarget.getBoundingClientRect()\n    if (clientX < left || clientX > right || clientY < top || clientY > bottom) {\n      getHostDynamicSelect(target).open = false\n    }\n  }\n}\n\n/**\n * @param {Event} event - input event\n */\nfunction handleDropdownOptionClick (event) {\n  const { target } = event\n  if (!(target instanceof Element)) { return }\n  const liTarget = target.closest('li.option-value:not(.option *)')\n  if (!(liTarget instanceof HTMLLIElement)) { return }\n  const value = liTarget.dataset.value\n  if (typeof value !== 'string') return\n  handleDropdownSelect(value, getHostDynamicSelect(liTarget))\n}\n\n/**\n * @param {string} value - selectValue\n * @param {DynamicSelect} dynamicSelect - Dynamic Select\n */\nfunction handleDropdownSelect (value, dynamicSelect) {\n  if (dynamicSelect.multiple) {\n    if (isMobile()) {\n      const valueSet = selectedOptionWeakMap.get(dynamicSelect)\n      if (!valueSet) {\n        selectedOptionWeakMap.set(dynamicSelect, new Set(dynamicSelect.valueAsArray))\n      }\n    }\n    const valueSet = new Set(dynamicSelect.valueAsArray)\n    const toggledValue = valueSet.symmetricDifference(new Set([value]))\n    dynamicSelect.valueAsArray = [...toggledValue]\n    updateButtonContent(dynamicSelect)\n    updateDropdownContent(dynamicSelect)\n    updateDropdownPosition(dynamicSelect)\n  } else {\n    dynamicSelect.value = value\n    updateButtonContent(dynamicSelect)\n    updateDropdownContent(dynamicSelect)\n    dynamicSelect.open = false\n    inputEl(dynamicSelect).querySelector('button')?.focus()\n  }\n}\n\n/**\n *\n * @param {Event} event - click event\n */\nfunction handleOkButtonClick (event) {\n  const { target } = event\n  const dynamicSelect = getHostDynamicSelect(target)\n  dynamicSelect.open = false\n}\n\n/**\n *\n * @param {Event} event - click event\n */\nfunction handleCancelButtonClick (event) {\n  const { target } = event\n  const dynamicSelect = getHostDynamicSelect(target)\n\n  const valueSet = selectedOptionWeakMap.get(dynamicSelect) ?? new Set(dynamicSelect.valueAsArray)\n  if (valueSet) {\n    dynamicSelect.valueAsArray = [...valueSet]\n  }\n  updateButtonContent(dynamicSelect)\n  dynamicSelect.open = false\n}\n", "import { DynamicSelect as Element } from '../web-component/dynamic-select.element.js'\nconst url = new URL(import.meta.url)\nconst tagName = url.searchParams.get('named')?.trim()\ntagName && customElements.define(tagName, Element)\nexport const DynamicSelect = Element\nexport default DynamicSelect\n"],
  "mappings": "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",
  "names": ["stdin_default", "stdin_default", "rePropName", "reEscapeChar", "stringToPathCache", "stringToPath", "string", "cachedResult", "result", "match", "number", "quote", "subString", "finalResult", "getFromStringPath", "obj", "stringPath", "pathArray", "current", "section", "normalizeValue", "value", "applyTemplateAux", "currentElement", "currentData", "name", "content", "getFromStringPath", "parent", "loopPath", "data", "newContent", "newData", "applyTemplate", "newValue", "child", "template", "clone", "isPlainObject", "obj", "dataObjectOfOption", "option", "baseData", "dataAttr", "jsonData", "isPlainObject", "optionElementOfData", "optionData", "computeOnce", "callback", "call", "result", "stdin_default", "loadSelectDefaultTemplates", "computeOnce", "templatesRootElement", "stdin_default", "query", "name", "result", "templatesOf", "element", "scopedTemplate", "defaultValues", "configurationOf", "element", "getConfigPositiveIntegerOrZero", "attribute", "config", "validPositiveIntegerPlusZeroOrNull", "numericValue", "parseCSV", "input", "delimiter", "parseCSVSync", "isAsyncIterable", "parseCSVAsync", "isIterable", "object", "iterable", "buffer", "headers", "chunk", "lines", "line", "fields", "parseCSVLine", "h", "i", "asyncIterable", "result", "current", "inQuotes", "char", "nextChar", "toTextStream", "response", "body", "reader", "decoder", "done", "value", "linkHeaderOf", "responseOrHeader", "header", "parseLinkHttpHeader", "parseHasMoreHeader", "headerName", "entries", "splitLinkEntries", "parseLinkHeaderEntry", "result", "byRel", "entry", "rel", "relEntry", "subEntry", "current", "inQuotes", "inAngleBrackets", "firstAngleBrackets", "e", "char", "headerEntry", "uri", "params", "match", "url", "parsedParams", "p", "param", "key", "parseCSVResponse", "response", "isCSVResponse", "linkHeader", "linkHeaderOf", "hasNextHeader", "parseHasMoreHeader", "data", "parseCSV", "toTextStream", "parseJsonResponse", "response", "isJsonResponse", "json", "parseJsonArrayResponse", "parseJsonObjectResponse", "linkHeader", "linkHeaderOf", "hasMoreHeader", "parseHasMoreHeader", "data", "links", "hasMore", "records", "nextLink", "useHasMore", "parseJsonLines", "input", "parseJsonLinesSync", "isAsyncIterable", "parseJsonLinesAsync", "isIterable", "object", "iterable", "delimiter", "buffer", "chunk", "lines", "line", "asyncIterable", "parseJsonLinesResponse", "response", "isJsonLinesResponse", "linkHeader", "linkHeaderOf", "hasNextHeader", "parseHasMoreHeader", "data", "parseJsonLines", "toTextStream", "isPlainObject", "dataLoaderData", "dataLoaderOf", "element", "dataLoader", "createDataLoaderFor", "elementRef", "getElement", "api", "fetchData", "fetchNextData", "i", "record", "result", "dispatchFetchDataEvent", "dataToFetch", "customResponse", "respondWithCalls", "event", "data", "getQueryValue", "getUrlToFetch", "fetchFromDataToFetch", "currentData", "latestValue", "additionalQueryParams", "fetchRecord", "addToFetchHistory", "isPromiseLike", "isResponse", "parseRespondWithCall", "url", "response", "parseResponse", "paramOfRespondWith", "parsedResponse", "isPlainObject", "hasMore", "links", "records", "isCSVResponse", "parseCSVResponse", "isJsonResponse", "parseJsonResponse", "isJsonLinesResponse", "parseJsonLinesResponse", "fetchHistory", "getDataSource", "src", "query", "srcURL", "name", "value", "dynamic_select_dom_exports", "__export", "cancelButtonEl", "containerEl", "dropdownEl", "dropdownOptionList", "getDynamicOptions", "getHostDynamicSelect", "inputEl", "isClearButton", "isDeselectButton", "isDynamicSelect", "isDynamicSelectSymbol", "isSearchInputEl", "okButtonEl", "searchInputEl", "valueListEl", "shadowQuery", "shadowQueryAll", "elementMatcher", "target", "rootNode", "host", "selector", "dynamicSelect", "result", "element", "node", "dataLoaderData", "dynamicOptionsOf", "element", "dataLoader", "createDynamicOptionsDataFor", "elementRef", "getElement", "api", "getDynamicOptions", "option", "dataObjectOfOption", "loadData", "loadNextData", "values", "value", "force", "selected", "loader", "dataLoaderOf", "dynamicOptionsElement", "container", "containerEl", "fetchData", "isAsync", "result", "selectedValues", "optionsMap", "data", "objectData", "dataObjectOfData", "optionElementOfData", "e", "optionData", "IterableWeakMap", "iterable", "key", "value", "getSize", "deleteKey", "clear", "callback", "thisArg", "dataOf", "iterateKeys", "keySet", "refWeakMap", "refVal", "ref", "entry", "IterableWeakSet", "struct", "array", "deref", "map", "init", "iter", "result", "getData", "portraitMobileMatchMedia", "landscapeMobileMatchMedia", "hasTouchScreen", "isPortraitMobile", "isLandscapeMobile", "isMobile", "observerData", "IterableWeakMap", "updateData", "isNowMobile", "data", "currentIsMobile", "observingNodes", "callback", "events", "element", "observeMatchMedia", "MobileDetectionObserver", "#data", "IterableWeakSet", "node", "shouldCenterDropdown", "isMobile", "positionFixer", "selectBoxes", "IterableWeakSet", "viewport", "startListening", "handler", "stopListening", "updateDropdownPosition", "element", "offsetLeft", "offsetTop", "boundingRect", "left", "top", "select", "dropdownEl", "dynamicSelect", "dropdown", "centerDropdownPosition", "dataLoaderData", "intersectionObserver", "records", "record", "isDynamicSelect", "select", "dropdownPositionUpdaterOf", "element", "dataLoader", "createDropdownPositionUpdaterFor", "elementRef", "getElement", "removeListenersForPotentialPositionChange", "potentialPositionChangeCallback", "api", "updateDropdownPosition", "addScrollListener", "removeScrollListener", "addResizeListener", "removeResizeListener", "addListenersForPotentialPositionChange", "dynamicSelect", "shouldCenterDropdown", "centerDropdownPosition", "dropdown", "dropdownEl", "clientRect", "inputEl", "viewportRect", "getViewportRect", "isTopDirection", "isLeftDirection", "xPosition", "yPosition", "visualViewport", "offsetLeft", "offsetTop", "width", "height", "traverseUpDom", "targetElement", "el", "parentNode", "parentElement", "getFallbackLanguage", "element", "root", "handleInvalidLanguage", "getLanguageFromElement", "node", "traverseUpDom", "langValue", "locale", "language", "region", "i18nButtonLabels", "mutationObserver", "records", "record", "target", "isDynamicSelect", "lang", "getLanguageFromElement", "language", "okButton", "okButtonEl", "cancelButton", "cancelButtonEl", "mutationObserverInit", "applyI18nOnSelectInputs", "select", "loadTemplate", "computeOnce", "templateElement", "stdin_default", "loadStyles", "sheet", "searchInputEl", "inputEl", "dropdownEl", "valueListEl", "dropdownOptionList", "getHostDynamicSelect", "containerEl", "dynamic_select_dom_exports", "isSearchInputEl", "isDeselectButton", "isClearButton", "isDynamicSelect", "optionsObserver", "mutations", "optionsObserverOptions", "mobileDetectionObserver", "MobileDetectionObserver", "mutation", "target", "isMobile", "uiModeParsed", "uiMode", "updateButtonContent", "selectedOptionWeakMap", "DynamicSelect", "shadowRoot", "template", "handleSearchInputChange", "handleSelectValueButtonClick", "handleSearchInputKeyDown", "handleDropdownToggle", "handleDropdownPointerDown", "handleDropdownOptionClick", "okButtonEl", "handleOkButtonClick", "cancelButtonEl", "handleCancelButtonClick", "applyI18nOnSelectInputs", "updateDropdownContent", "newSearchFilter", "value", "iterator", "option", "valueAsArray", "dynamicOptionsOf", "dataObjectOfOption", "info", "valueAsObjects", "isValidValue", "validValueEntries", "isPlainObject", "obj", "map", "data", "text", "rest", "openBool", "isDynamicSelectSymbol", "multipleBool", "options", "result", "firstOption", "name", "oldValue", "newValue", "isOnMobile", "loadData", "dropdownPositionUpdaterOf", "getDropdownListData", "dynamicSelect", "ungroupedOptions", "optionGroups", "groupName", "optionsData", "searchFilter", "minQueryLength", "configurationOf", "matchFilter", "filterMatcher", "filteredUngrouped", "filteredOptionGroups", "filteredOptions", "getDropdownTemplateData", "checkedIndicatorType", "focusIndex", "el", "filter", "caseInsensitiveFilter", "dropdownData", "dropdownList", "optionTemplate", "loadingNotification", "templatesOf", "listFragment", "applyTemplate", "slot", "multiSelectInput", "mobileMultiSelectInput", "singleSelectInput", "isMultiple", "buttonTemplate", "selectedOptionsVal", "button", "event", "code", "focusAttr", "dropdownOptions", "nextFocusIndex", "previousFocusIndex", "focusedElement", "handleDropdownSelect", "selectOption", "currentTarget", "clientX", "clientY", "left", "right", "bottom", "top", "liTarget", "toggledValue", "updateDropdownPosition", "valueSet", "url", "tagName", "DynamicSelect", "browser_default"]
}
